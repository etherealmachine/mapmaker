(this["webpackJsonprpg.ai"]=this["webpackJsonprpg.ai"]||[]).push([[0],Array(64).concat([function(e){e.exports=JSON.parse('{"name":"Temple of Clanggedin","description":"The Temple to Clanggedin Silverbeard, Father of Battle and the Lord of the Twin Axes, was occupied by a group of Shield Dwarves until recently. The Temple was dug into a nearby cliffside, set up as a forward operating base for dealing with the giants endemic to the mountains.\\n\\nRecently, the dwarves were ambushed. A clan of goblins allied with the giants to lure the dwarves out and take over the temple. The dwarves were nearly annihilated by the giants, with only a few making it back to town to report.\\n\\nSince then, the goblins have grown bolder, striking out from their safe base to raid caravans and the occasional farm. The villagers have had enough and convinced the local lord to offer a sizable reward to any adventurers brave enough to root the goblins out of the temple and reclaim it for the civilized world.","levels":[{"features":[{"geometries":[{"type":"polygon","coordinates":[[34,30],[34,27.5],[31.5,27.5],[31.5,29.5],[31,29.5],[31,24],[30,24],[30,29.5],[29.5,29.5],[29.5,27.5],[27,27.5],[27,30],[29.5,30],[30,29.75],[30,30],[31,30],[31,29.75],[31.5,30],[34,30]]},{"type":"door","coordinates":[[30,24],[31,24]],"subtype":"normal"},{"type":"door","coordinates":[[30,30],[31,30]],"subtype":"normal"}],"properties":{"type":"room","name":"Main Entrance","description":"The entrance is flanked by two arrow slits leading to two small guard rooms. \\n\\nFour **goblins** guard this area, two on either side. They are arguing about dinner and playing dice and have disadvantage on perception checks to stealth past.\\n\\nIf alerted, they use the secret passages on either side to flee and notify the rest of the group."}},{"geometries":[{"type":"polygon","coordinates":[[30,27],[30,24],[27,24],[27,27],[28,27],[28,27.5],[29,27.5],[29,27],[30,27]]},{"type":"polygon","coordinates":[[34,27],[34,24],[31,24],[31,27],[32,27],[32,27.5],[33,27.5],[33,27],[34,27]]},{"type":"door","coordinates":[[28,27.5],[29,27.5]],"subtype":"normal"},{"type":"door","coordinates":[[32,27.5],[33,27.5]],"subtype":"normal"},{"type":"door","coordinates":[[31,25],[31,26]],"subtype":"normal"},{"type":"door","coordinates":[[30,25],[30,26]],"subtype":"normal"}],"properties":{"type":"room","name":"Entry Chambers","description":"These chambers were used to host guests coming to the temple, as well as places for the guards to rest. Now they sit empty."}},{"geometries":[{"type":"polygon","coordinates":[[34,24.5]]}],"properties":{"type":"room"}},{"geometries":[{"type":"polygon","coordinates":[[27,29],[27,28.5],[26.5,28.5],[26.5,25],[27,25],[27,24.5],[26.5,24.5],[26.5,24],[26,24],[26,29],[27,29]]}],"properties":{"type":"room","name":"Secret Passage","description":"These 2.5ft wide corridors are just big enough for a medium-sized creature to squeeze into. The door from the guard room is visible, but the other entrances are secret doors that require either a **Perception** check (DC 20) or a 10 minute **Investigation** (DC 10) to notice."}},{"geometries":[{"type":"polygon","coordinates":[[33.5,21.5],[33.5,20.5],[33,20.5],[33,17.5],[33.5,17.5],[33.5,16.5],[33,16.5],[33,14],[31,14],[31,13],[30,13],[30,14],[28,14],[28,16.5],[27.5,16.5],[27.5,17.5],[28,17.5],[28,20.5],[27.5,20.5],[27.5,21.5],[28,21.5],[28,24],[33,24],[33,21.5],[33.5,21.5]]},{"type":"decoration","coordinates":[[28,18.5],[29,19.5]],"subtype":"statue"},{"type":"decoration","coordinates":[[28,15],[29,16]],"subtype":"statue"},{"type":"decoration","coordinates":[[32,15],[32.5,16]],"subtype":"statue"},{"type":"decoration","coordinates":[[32,18.5],[32.5,19.5]],"subtype":"statue"},{"type":"decoration","coordinates":[[28,22],[29,23]],"subtype":"statue"},{"type":"decoration","coordinates":[[32,22],[33,23]],"subtype":"statue"},{"type":"door","coordinates":[[30,13],[31,13]],"subtype":"normal"}],"properties":{"type":"room","name":"Main Hall"}},{"geometries":[{"type":"polygon","coordinates":[[43,24],[43,19.5],[34,19.5],[34,20.5],[33.5,20.5],[33.5,21.5],[34,21.5],[34,24],[43,24]]},{"type":"door","coordinates":[[33.5,20.5],[33.5,21.5]],"subtype":"normal"}],"properties":{"type":"room","name":"Armory"}},{"geometries":[{"type":"polygon","coordinates":[[43,19],[43,14],[34,14],[34,16.5],[33.5,16.5],[33.5,17.5],[34,17.5],[34,19],[38,19],[38,19.5],[39,19.5],[39,19],[43,19]]},{"type":"door","coordinates":[[33.5,16.5],[33.5,17.5]],"subtype":"normal"},{"type":"door","coordinates":[[38,19.5],[39,19.5]],"subtype":"normal"}],"properties":{"type":"room","name":"Barracks"}},{"geometries":[{"type":"polygon","coordinates":[[27.5,21.5],[27.5,20.5],[27,20.5],[27,19],[22,19],[22,24],[27,24],[27,21.5],[27.5,21.5]]},{"type":"door","coordinates":[[27.5,21.5],[27.5,20.5]],"subtype":"normal"},{"type":"door","coordinates":[[24,19],[25,19]],"subtype":"normal"},{"type":"door","coordinates":[[22,22],[22,23]],"subtype":"normal"}],"properties":{"type":"room","name":"Kitchen"}},{"geometries":[{"type":"polygon","coordinates":[[34,24.5]]}],"properties":{"type":"room"}},{"geometries":[{"type":"polygon","coordinates":[[27.5,17.5],[27.5,16.5],[27,16.5],[27,14],[19,14],[19,19],[27,19],[27,17.5],[27.5,17.5]]},{"type":"door","coordinates":[[27.5,17.5],[27.5,16.5]],"subtype":"normal"},{"type":"door","coordinates":[[19,19],[20,19]],"subtype":"normal"}],"properties":{"type":"room","name":"Dining Hall"}},{"properties":{"type":"room","name":"Commode"},"geometries":[{"type":"polygon","coordinates":[[19,21],[22,21],[22,19],[19,19],[19,21]]}]},{"geometries":[{"type":"polygon","coordinates":[[19,24],[22,24],[22,21],[19,21],[19,24]]}],"properties":{"type":"room","name":"Pantry"}},{"geometries":[{"type":"ellipse","coordinates":[[26,13],[35,4]]},{"type":"decoration","coordinates":[[27,8],[28,9]],"subtype":"column"},{"type":"decoration","coordinates":[[29.5,5],[31.5,7]],"subtype":"statue"},{"type":"decoration","coordinates":[[33,8],[34,9]],"subtype":"column"}],"properties":{"type":"room","name":"Altar to Clanggedin"}},{"properties":{"type":"room","name":""},"geometries":[{"type":"polygon","coordinates":[[35,29],[35,24],[34.5,24],[34.5,24.5],[34,24.5],[34,25],[34.5,25],[34.5,28.5],[34,28.5],[34,29],[35,29]]}]},{"geometries":[{"type":"line","coordinates":[[34,28.5],[34,29]]}],"properties":{"type":"other"}},{"geometries":[{"type":"line","coordinates":[[27,28.5],[27,29]]}],"properties":{"type":"other"}},{"geometries":[{"type":"ellipse","coordinates":[[59,14.5],[65.5,11]]},{"type":"brush","coordinates":[[60.15345814224975,11.371120556895779],[60.24354823233984,11.281030466805687],[60.36366835245995,11.220970406745629],[60.60390859270019,11.070820256595479],[60.784088772880374,10.980730166505388],[60.964268953060554,10.8906400764153],[61.26456925336085,10.800549986325212],[61.44474943354103,10.77051995629518],[61.68498967378127,10.77051995629518],[62.13544012423172,10.800549986325212],[62.375680364471954,10.800549986325212],[62.615920604712194,10.860610046385268],[62.97628096507255,10.92067010644533],[63.096401085192674,10.950700136475358],[63.15646114525273,10.980730166505388],[63.21652120531279,11.01076019653542],[63.33664132543291,11.100850286625509],[63.51682150561309,11.190940376715597],[63.66697165576324,11.220970406745629],[63.93724192603351,11.281030466805687],[64.05736204615363,11.311060496835719],[64.2375422263338,11.341090526865747],[64.38769237648395,11.371120556895779],[64.5378425266341,11.401150586925807],[64.71802270681428,11.461210646985867],[64.80811279690437,11.491240677015897],[64.92823291702449,11.521270707045925],[65.16847315726473,11.551300737075957],[65.28859327738485,11.611360797136017],[65.31862330741488,11.671420857196075],[65.3486533374449,11.701450887226105],[65.3486533374449,11.731480917256135],[65.40871339750497,11.851601037376254],[65.438743427535,11.971721157496374],[65.49880348759505,12.272021457796674],[65.52883351762509,12.452201637976852],[65.52883351762509,12.54229172806694],[65.52883351762509,12.602351788127],[65.49880348759505,12.662411848187059],[65.438743427535,12.72247190824712],[65.438743427535,12.78253196830718],[65.37868336747493,12.84259202836724],[65.31862330741488,12.902652088427299],[65.25856324735481,13.02277220854742],[65.2285332173248,13.112862298637507],[65.19850318729476,13.232982418757627],[65.16847315726473,13.353102538877748],[65.07838306717464,13.443192628967836],[65.01832300711457,13.533282719057926],[64.98829297708455,13.563312749087954],[64.80811279690437,13.683432869208076],[64.65796264675423,13.803552989328194],[64.65796264675423,13.803552989328194],[64.65796264675423,13.833583019358224],[64.65796264675423,13.833583019358224],[64.65796264675423,13.863613049388254],[64.65796264675423,13.893643079418284],[64.65796264675423,13.953703139478343]]},{"type":"brush","coordinates":[[63.276581265372855,14.374123559898761],[63.18649117528276,14.404153589928791],[62.76607075486234,14.464213649988851],[62.52583051462211,14.464213649988851],[62.375680364471954,14.464213649988851],[62.315620304411894,14.464213649988851],[62.2255302143218,14.464213649988851],[62.075380064171654,14.464213649988851],[61.89519988399148,14.494243680018881],[61.53483952363112,14.52427371004891],[61.08438907318067,14.58433377010897],[60.904208893000494,14.614363800139],[60.784088772880374,14.614363800139],[60.724028712820314,14.58433377010897],[60.69399868279028,14.554303740078941],[60.66396865276025,14.52427371004891],[60.63393862273022,14.494243680018881],[60.54384853264013,14.434183619958821],[60.5138185026101,14.404153589928791],[60.45375844255004,14.344093529868731],[60.36366835245995,14.284033469808671],[60.18348817227977,14.193943379718583],[60.06336805215965,14.133883319658521],[59.94324793203953,14.103853289628493],[59.76306775185936,14.013763199538403],[59.64294763173924,13.953703139478343],[59.492797481589086,13.893643079418284],[59.34264733143894,13.833583019358224],[59.28258727137888,13.773522959298164],[59.25255724134885,13.743492929268136],[59.22252721131882,13.713462899238104],[59.22252721131882,13.683432869208076],[59.19249718128879,13.623372809148014],[59.132437121228726,13.533282719057926],[59.10240709119871,13.443192628967836],[59.04234703113864,13.263012448787658],[59.04234703113864,13.172922358697567],[59.07237706116867,13.052802238577447],[59.10240709119871,12.932682118457329],[59.07237706116867,12.84259202836724],[59.07237706116867,12.78253196830718],[59.10240709119871,12.69244187821709],[59.132437121228726,12.602351788127],[59.16246715125876,12.452201637976852],[59.19249718128879,12.42217160794682],[59.22252721131882,12.392141577916792],[59.22252721131882,12.392141577916792]]},{"type":"decoration","coordinates":[[61,11.5],[63.5,12]],"subtype":"column"}],"properties":{"type":"room","name":"Cavernous Pit","description":"The center of this cavern has large pit that descends into the darkness."}},{"geometries":[{"type":"brush","coordinates":[[59.91038468782345,11.992837343841897],[59.702051354490116,11.873789724794278],[59.31514659258536,11.75474210574666],[58.74967040210917,11.635694486699041],[58.27347992591869,11.516646867651422],[57.85681325925203,11.457123058127614],[57.559194211632985,11.42736115336571],[57.26157516401394,11.42736115336571],[56.93419421163299,11.42736115336571],[56.725860878299656,11.457123058127614],[56.398479925918714,11.486884962889519],[55.95205135449014,11.576170677175233],[55.267527544966335,11.75474210574666],[54.55324183068062,11.992837343841897],[53.422289449728254,12.260694486699037],[52.916337068775874,12.320218296222846],[52.38062278306159,12.320218296222846],[51.99371802115683,12.320218296222846],[51.517527544966356,12.29045639146094],[50.80324183068065,12.29045639146094],[50.14847992591875,12.29045639146094],[48.987765640204465,12.201170677175229],[48.51157516401399,12.141646867651419],[48.035384687823516,12.08212305812761],[47.648479925918764,12.052361153365705],[47.2913370687759,12.052361153365705],[46.54728944972829,12.0225992486038],[46.07109897353782,12.0225992486038],[45.59490849734735,11.992837343841897],[45.297289449728304,11.963075439079992],[44.731813259252114,11.903551629556182],[44.37467040210926,11.844027820032373],[44.166337068775924,11.81426591527047],[43.86871802115688,11.784504010508563],[43.511575164014026,11.784504010508563],[43.3032418306807,11.784504010508563],[43.18419421163308,11.784504010508563],[43.09490849734736,11.784504010508563],[42.97586087829974,11.784504010508563],[42.82705135449022,11.784504010508563],[42.58895611639499,11.81426591527047],[42.41038468782356,11.844027820032373],[42.23181325925213,11.873789724794278],[42.20205135449022,11.903551629556182],[42.17228944972832,11.903551629556182],[42.112765640204515,11.933313534318087],[42.02347992591879,11.992837343841897],[41.934194211633084,12.052361153365705],[41.815146592585464,12.111884962889516],[41.63657516401404,12.171408772413322],[41.54728944972832,12.230932581937132],[41.487765640204515,12.260694486699037],[41.428241830680705,12.320218296222846],[41.3687180211569,12.379742105746656],[41.30919421163309,12.439265915270465],[41.27943230687118,12.498789724794275],[41.24967040210928,12.558313534318083],[41.21990849734737,12.588075439079988],[41.19014659258547,12.677361153365702],[41.160384687823566,12.73688496288951],[41.160384687823566,12.766646867651415],[41.160384687823566,12.826170677175224],[41.13062278306166,12.855932581937129],[41.13062278306166,12.915456391460937],[41.100860878299756,12.974980200984747],[41.100860878299756,13.034504010508556],[41.100860878299756,13.034504010508556],[41.100860878299756,13.034504010508556],[41.100860878299756,13.064265915270461],[41.100860878299756,13.064265915270461],[41.100860878299756,13.064265915270461]]}],"properties":{"type":"room","name":"Backdoor","description":"The secret door here is clearly visible from the cavern side, where rough rock walls turn into a smooth stone door. From the other side it requires a **Perception** check (DC 20) or a 30 minute **Investigation** check (DC 15). The goblins have yet to notice this chink in their armor."}},{"geometries":[{"type":"brush","coordinates":[[67.97586087829959,29.96902782003226],[67.97586087829959,29.730932581937022],[67.97586087829959,29.25474210574655],[67.97586087829959,28.65950401050846],[67.94609897353769,28.153551629556084],[67.73776564020436,27.558313534317985],[67.58895611639483,27.290456391460847],[67.44014659258531,26.992837343841803],[67.26157516401388,26.605932581937047],[67.05324183068055,26.040456391460854],[66.39847992591864,24.820218296222766],[65.98181325925198,23.957123058127536],[65.77347992591865,23.332123058127543],[65.65443230687103,22.82617067717516],[65.65443230687103,22.260694486698974],[65.65443230687103,21.724980200984692],[65.59490849734722,21.338075439079937],[65.50562278306151,20.951170677175174],[65.35681325925198,20.415456391460893],[64.94014659258532,19.463075439079944],[64.731813259252,18.957123058127568],[64.55324183068056,18.510694486698995],[64.43419421163294,18.034504010508524],[64.19609897353772,17.14164686765139],[64.19609897353772,16.63569448669901],[64.28538468782342,16.278551629556155],[64.31514659258532,16.099980200984728],[64.28538468782342,16.070218296222823],[64.25562278306151,15.98093258193711],[64.1663370687758,15.832123058127587],[64.106813259252,15.504742105746637],[64.13657516401389,15.296408772413304],[64.19609897353772,15.088075439079972],[64.19609897353772,14.998789724794257],[64.19609897353772,14.969027820032354],[64.19609897353772,14.969027820032354],[64.22586087829961,14.87974210574664],[64.22586087829961,14.760694486699022],[64.1663370687758,14.641646867651405],[64.106813259252,14.463075439079976],[64.07705135449008,14.373789724794262],[64.07705135449008,14.373789724794262],[64.07705135449008,14.344027820032357],[64.07705135449008,14.344027820032357],[64.04728944972818,14.284504010508549],[63.958003735442475,14.224980200984739],[63.86871802115675,14.16545639146093],[63.80919421163295,14.135694486699027],[63.80919421163295,14.135694486699027]]}],"properties":{"type":"room","name":"Side Entrance","description":"Hidden behind some bushes to the East is the secret side entrance. Finding this entrance is either a **Perception** check (DC "}},{"geometries":[{"type":"brush","coordinates":[[66.51982450861607,25.455204640979773],[66.48979447858603,25.425174610949746],[66.36967435846593,25.365114550889682],[66.0393440281356,25.305054490829622],[65.70901369780526,25.275024460799592],[65.46877345756504,25.275024460799592],[65.19850318729476,25.305054490829622],[65.07838306717464,25.305054490829622],[64.8381428269344,25.425174610949746],[64.11742210621368,25.635384821159953],[63.69700168579326,25.7855349713101],[63.24655123534282,25.905655091430223],[62.28559027438187,26.05580524158037],[61.95525994405154,26.085835271610396],[61.65495964375123,26.11586530164043],[61.47477946357106,26.11586530164043],[61.20450919330079,26.085835271610396],[60.84414883294043,26.02577521155034],[60.57387856267017,25.96571515149028],[60.33363832242993,25.87562506140019],[60.09339808218969,25.815565001340133],[59.79309778188939,25.69544488122001],[59.67297766176927,25.635384821159953],[59.552857541649146,25.575324761099896],[59.43273742152903,25.485234671009803],[59.28258727137888,25.425174610949746],[59.04234703113864,25.365114550889682],[58.89219688098849,25.365114550889682],[58.65195664074825,25.335084520859656],[58.41171640050801,25.305054490829622],[58.17147616026777,25.154904340679476],[57.93123592002754,24.914664100439236],[57.420725409517026,24.644393830168966],[57.27057525936688,24.524273710048853],[57.150455139246766,24.34409352986867],[57.03033501912664,24.16391334968849],[56.94024492903655,23.923673109448252],[56.82012480891644,23.653402839177982],[56.51982450861613,23.14289232866747],[56.309614298405926,22.81256199833714],[55.9792839680756,22.392141577916732],[55.28859327738491,21.79154097731613],[54.718022706814345,21.43118061695577],[53.87718186597351,21.01076019653536],[53.60691159570324,20.890640076415238],[53.51682150561315,20.800549986325148],[53.51682150561315,20.710459896235058],[53.48679147558312,20.650399836174998],[53.366671355463005,20.50024968602485],[53.33664132543297,20.109859295634465],[53.33664132543297,19.359108544883718],[53.24655123534288,18.728477914253087],[53.21652120531285,18.54829773407291],[53.21652120531285,18.54829773407291]]},{"type":"brush","coordinates":[[56.91021489900652,24.13388331965846],[56.70000468879631,24.16391334968849],[56.51982450861613,24.13388331965846],[56.21952420831584,24.13388331965846],[55.79910378789542,24.16391334968849],[55.64895363774527,24.193943379718522],[55.46877345756509,24.284033469808605],[55.28859327738491,24.374123559898695],[54.898202886994525,24.58433377010891],[54.62793261672425,24.76451395028909],[54.297602286393925,24.974724160499296],[53.72703171582336,25.365114550889682],[53.366671355463005,25.575324761099896],[52.79610078489244,25.905655091430223],[52.465770454562104,26.11586530164043],[51.9552599440516,26.47622566200079],[51.684989673781324,26.626375812150936],[51.294599283390944,26.836586022361143],[51.02432901312067,26.956706142481266],[50.54384853264019,27.106856292631413],[50.27357826236993,27.166916352691473],[49.943247932039604,27.196946382721503],[49.67297766176933,27.196946382721503],[49.49279748158915,27.196946382721503],[49.462767451559124,27.166916352691473],[49.462767451559124,27.106856292631413],[49.462767451559124,27.106856292631413]]},{"type":"brush","coordinates":[[55.6301848689765,21.69169112746629],[55.769073757865385,21.52502446079962],[56.13018486897649,21.080580016355178],[56.4912959800876,20.663913349688514],[56.68574042453205,20.413913349688514],[57.074629313420935,19.775024460799628],[57.18574042453204,19.386135571910746],[57.26907375786538,19.10835779413297],[57.324629313420935,18.830580016355192],[57.324629313420935,18.60835779413297],[57.352407091198714,18.302802238577417],[57.40796264675427,17.99724668302186],[57.54685153564315,17.608357794132978],[57.71351820230982,17.247246683021867],[57.852407091198714,16.88613557191076],[58.130184868976485,16.469468905244092],[58.32462931342093,16.330580016355206],[58.46351820230982,16.27502446079965],[58.51907375786537,16.27502446079965],[58.57462931342093,16.27502446079965],[58.60240709119871,16.27502446079965],[58.60240709119871,16.27502446079965],[58.60240709119871,16.27502446079965]]}],"properties":{"type":"room","description":"A colony of **vampire bats** lives here. The bats sleep during the day and go out at night to hunt. Sneaking past the bats is possible (**Stealth** DC 10), but if awoken they attack.","name":"Bat Country"}},{"geometries":[{"type":"polygon","coordinates":[[41,14],[41.5,14],[41.5,13],[41,13],[41,14]]}],"properties":{"type":"room"}},{"geometries":[{"type":"line","coordinates":[[41,14],[41.5,14]]},{"type":"door","coordinates":[[41,14],[41.5,14]],"subtype":"secret"}],"properties":{"type":"other"}},{"geometries":[{"type":"line","coordinates":[[34.5,24],[35,24]]},{"type":"door","coordinates":[[34.5,24],[35,24]],"subtype":"secret"}],"properties":{"type":"other"}},{"geometries":[{"type":"line","coordinates":[[34,24.5],[34,25]]},{"type":"door","coordinates":[[34,24.5],[34,25]],"subtype":"secret"}],"properties":{"type":"other"}},{"geometries":[{"type":"line","coordinates":[[27,24.5],[27,25]]},{"type":"door","coordinates":[[27,24.5],[27,25]],"subtype":"secret"}],"properties":{"type":"other"}},{"geometries":[{"type":"line","coordinates":[[26,24],[26.5,24]]},{"type":"door","coordinates":[[26,24],[26.5,24]],"subtype":"secret"}],"properties":{"type":"other"}},{"geometries":[{"type":"line","coordinates":[[30,5],[31,5]]},{"type":"door","coordinates":[[30,5],[31,5]],"subtype":"secret"}],"properties":{"type":"other"}},{"geometries":[{"type":"line","coordinates":[[67.5,30.5],[68.5,30.5]]},{"type":"door","coordinates":[[67.5,30.5],[68.5,30.5]],"subtype":"secret"}],"properties":{"type":"other"}}],"name":"Main Level","description":""},{"features":[{"geometries":[{"type":"polygon","coordinates":[[30,14],[31,14],[31,5],[30,5],[30,14]]},{"type":"door","coordinates":[[30,14],[31,14]],"subtype":"normal"}],"properties":{"type":"room"}},{"geometries":[{"type":"polygon","coordinates":[[33.5,21.5],[33.5,20.5],[33,20.5],[33,17.5],[33.5,17.5],[33.5,16.5],[33,16.5],[33,14],[28,14],[28,24],[33,24],[33,21.5],[33.5,21.5]]},{"type":"door","coordinates":[[33.5,17.5],[33.5,16.5]],"subtype":"normal"},{"type":"door","coordinates":[[33.5,21.5],[33.5,20.5]],"subtype":"normal"}],"properties":{"type":"room"}},{"geometries":[{"type":"polygon","coordinates":[[43,19],[43,14],[34,14],[34,16.5],[33.5,16.5],[33.5,17.5],[34,17.5],[34,19],[43,19]]}],"properties":{"type":"room"}},{"geometries":[{"type":"polygon","coordinates":[[43,24],[43,19.5],[34,19.5],[34,20.5],[33.5,20.5],[33.5,21.5],[34,21.5],[34,24],[43,24]]}],"properties":{"type":"room"}},{"properties":{"type":"other"},"geometries":[{"type":"stairs","coordinates":[[30,10],[31,5]]}]},{"geometries":[{"type":"brush","coordinates":[[41.199016311272,12.907088318876212],[41.199016311272,12.861554088518542],[41.24455054162967,12.770485627803199],[41.33561900234501,12.65665005190902],[41.42668746306036,12.542814476014842],[41.63159149966988,12.337910439405322],[41.72265996038523,12.269609093868814],[41.8364955362794,12.155773517974636],[41.92756399699474,12.08747217243813],[41.973098227352416,12.064705057259292],[42.01863245771008,12.01917082690162],[42.06416668806776,11.996403711722785],[42.13246803360426,11.950869481365114],[42.20076937914077,11.882568135828608],[42.31460495503495,11.814266790292098],[42.382906300571456,11.768732559934428],[42.45120764610797,11.723198329576757],[42.51950899164447,11.677664099219085],[42.65611168271748,11.632129868861416],[42.74718014343283,11.609362753682579],[42.86101571932701,11.563828523324908],[42.99761841040002,11.563828523324908],[43.088686871115364,11.541061408146073],[43.179755331830705,11.541061408146073],[43.384659368440225,11.541061408146073],[43.49849494433441,11.541061408146073],[43.61233052022858,11.541061408146073],[43.7489332113016,11.541061408146073],[43.88553590237461,11.541061408146073],[43.976604363089955,11.563828523324908],[44.09043993898413,11.609362753682579],[44.20427551487831,11.65489698404025],[44.272576860414816,11.677664099219085],[44.34087820595132,11.700431214397922],[44.386412436309,11.745965444755594],[44.43194666666667,11.768732559934428],[44.50024801220317,11.791499675113265],[44.545782242560854,11.814266790292098],[44.568549357739684,11.814266790292098],[44.568549357739684,11.814266790292098],[44.591316472918514,11.814266790292098],[44.72791916399153,11.814266790292098],[45.0238916613164,11.85980102064977],[45.52476819525078,11.905335251007443],[45.88904203811215,11.950869481365114],[46.20778165061585,11.97363659654395],[46.59482260865606,12.01917082690162],[46.77695953008674,12.01917082690162],[46.95909645151743,12.01917082690162],[47.232301833663456,12.01917082690162],[47.45997298545181,12.01917082690162],[47.6421099068825,11.996403711722785],[47.86978105867085,11.996403711722785],[48.12021932563805,11.950869481365114],[48.234054901532225,11.950869481365114],[48.46172605332058,11.950869481365114],[48.6666300899301,11.905335251007443],[48.98536970243381,11.837033905470935],[49.19027373904332,11.745965444755594],[49.46347912118936,11.541061408146073],[49.57731469708354,11.44999294743073],[49.713917388156545,11.336157371536551],[49.8732871944084,11.267856026000043],[50.05542411583908,11.222321795642374],[50.1920268069121,11.176787565284702],[50.35139661316395,11.13125333492703],[50.60183488013114,11.040184874211688],[50.73843757120415,11.040184874211688],[50.92057449263484,11.040184874211688],[51.102711414065524,11.085719104569359],[51.2165469899597,11.176787565284702],[51.42145102656922,11.290623141178878],[51.5352866024634,11.358924486715386],[51.71742352389409,11.4955271777884],[51.8540262149671,11.586595638503745],[51.922327560503604,11.677664099219085],[51.967861790861285,11.700431214397922],[52.05893025157662,11.768732559934428],[52.08169736675545,11.791499675113265]]},{"type":"polygon","coordinates":[[40.5,14],[40.5,12.5],[42,12.5],[42,14]]}],"properties":{"type":"room"}},{"geometries":[{"type":"brush","coordinates":[[52.17614739134394,11.840769431049791],[52.19891450652277,11.840769431049791],[52.31275008241695,11.886303661407464],[52.44935277348996,11.977372122122805],[52.67702392527831,12.136741928374654],[52.813626616351335,12.27334461944767],[52.99576353778202,12.47824865605719],[53.132366228855034,12.63761846230904],[53.223434689570375,12.751454038203219],[53.337270265464554,12.979125189991576],[53.40557161100106,13.138494996243425],[53.47387295653756,13.27509768731644],[53.56494141725291,13.525535954283633],[53.633242762789415,13.730439990893153],[53.724311223504756,13.912576912323837],[53.838146799398935,14.071946718575687],[54.043050836008454,14.32238498554288],[54.20242064226031,14.458987676615894],[54.316256218154486,14.572823252510073],[54.56669448512168,14.732193058761924],[54.7715985217312,14.868795749834938],[55.022036788698394,14.982631325729114],[55.386310631559766,15.187535362338638],[55.65951601370579,15.301370938232816],[55.887187165494154,15.39243939894816],[56.20592677799785,15.506274974842336],[56.3652965842497,15.529042090021171],[56.66126908157456,15.574576320378844],[56.84340600300525,15.574576320378844],[57.16214561550895,15.529042090021171],[57.3898167672973,15.437973629305828],[57.594720803906824,15.27860382305398],[57.86792618605285,15.073699786444458],[57.981761761947034,14.982631325729114],[58.07283022266237,14.914329980192608],[58.18666579855655,14.823261519477265],[58.25496714409306,14.75496017394076],[58.36880271998724,14.663891713225416],[58.43710406552374,14.59559036768891],[58.505405411060245,14.5272890221524],[58.52817252623909,14.504521906973567],[58.55093964141792,14.481754791794732],[58.573706756596756,14.458987676615894],[58.59647387177559,14.43622056143706],[58.61924098695443,14.390686331079388],[58.6647752173121,14.367919215900553],[58.687542332490935,14.299617870364045],[58.75584367802744,14.254083640006373],[58.77861079320628,14.208549409648702],[58.869679253921625,14.140248064112196],[58.91521348427929,14.071946718575687],[59.00628194499463,14.003645373039182],[59.05181617535231,13.95811114268151],[59.09735040570998,13.912576912323837],[59.12011752088881,13.912576912323837],[59.14288463606765,13.889809797145002],[59.14288463606765,13.889809797145002],[59.165651751246486,13.867042681966167],[59.18841886642532,13.867042681966167],[59.21118598160415,13.867042681966167],[59.23395309678299,13.844275566787331],[59.25672021196183,13.821508451608498],[59.25672021196183,13.821508451608498],[59.279487327140664,13.79874133642966]]}],"properties":{"type":"room"}},{"geometries":[{"type":"brush","coordinates":[[60.151128045693305,10.874918883880131],[59.954375198468796,10.678166036655623],[59.53276195441628,10.284660342206614],[59.19547135917427,10.031692395775105],[58.83007321432876,9.778724449343597],[58.57710526789726,9.610079151722593],[58.408459970276255,9.49764895330859],[58.18359957344824,9.413326304498087],[58.014954275827236,9.329003655687583],[57.84630897820624,9.244681006877082],[57.73387877979223,9.21657345727358],[57.537125932567726,9.16035835806658],[57.39658818455022,9.132250808463077],[57.31226553573972,9.104143258859578],[57.11551268851521,9.047928159652576],[56.8344371924802,8.991713060445573],[56.58146924604869,8.935497961238573],[56.38471639882419,8.85117531242807],[55.99121070437518,8.738745114014067],[55.682027658736665,8.626314915600062],[55.204199315477155,8.54199226678956],[54.92312381944215,8.513884717186059],[54.55772567459664,8.513884717186059],[54.16421998014763,8.485777167582558],[53.82692938490562,8.373346969168555],[53.602068988077605,8.289024320358052],[53.2647783928356,8.120379022737048],[53.06802554561109,8.007948824323044],[52.87127269838659,7.86741107630554],[52.70262740076558,7.726873328288036],[52.50587455354107,7.614443129874033],[52.14047640869556,7.333367633839024],[51.83129336305706,7.136614786614518],[51.69075561503955,7.052292137804016],[51.60643296622905,6.996077038597014],[51.55021786702205,6.967969488993514],[51.49400276781504,6.967969488993514],[51.49400276781504,6.9398619393900125],[51.35346501979754,6.883646840183011],[51.15671217257304,6.743109092165507],[50.93185177574503,6.6306788937515035],[50.847529126934525,6.574463794544502],[50.763206478124026,6.5182486953375],[50.73509892852052,6.4901411457339995],[50.62266873010652,6.433926046526998],[50.45402343248551,6.377710947319996],[50.42591588288201,6.3496033977164945]]}],"properties":{"type":"room"}},{"geometries":[{"type":"brush","coordinates":[[58.689535466311256,9.413326304498087],[58.689535466311256,9.413326304498087],[58.689535466311256,9.357111205291085],[58.689535466311256,9.272788556480581],[58.689535466311256,9.132250808463077],[58.63332036710426,8.794960213221067],[58.548997718293755,8.317131869961553],[58.49278261908675,7.895518625909042],[58.464675069483256,7.670658229081034],[58.43656751987975,7.445797832253027],[58.43656751987975,7.333367633839024],[58.43656751987975,7.220937435425021],[58.43656751987975,6.996077038597014],[58.408459970276255,6.658786443355004],[58.408459970276255,6.405818496923497],[58.32413732146575,5.927990153663982],[58.23981467265524,5.393946711197467],[58.18359957344824,5.056656115955457],[58.155492023844744,4.606935322299444],[58.155492023844744,4.325859826264435],[58.18359957344824,4.1009994294364285],[58.211707123051745,4.016676780625926],[58.296029771862244,3.8480314830049207],[58.43656751987975,3.5950635365734134],[58.57710526789726,3.342095590141905],[58.63332036710426,3.229665391727902],[58.74575056551826,3.0329125445033966],[58.83007321432876,2.892374796485892],[58.85818076393227,2.8361596972788905],[58.91439586313927,2.751837048468388]]}],"properties":{"type":"room"}},{"geometries":[{"type":"brush","coordinates":[[65.03070386199087,11.410478296212709],[65.28367180842238,11.185617899384702],[65.6209624036644,10.84832730414269],[65.9582529989064,10.511036708900681],[66.2112209453379,10.173746113658671],[66.3517586933554,10.005100816037666],[66.63283418939042,9.724025320002657],[66.91390968542542,9.442949823967648],[67.13877008225343,9.274304526346643],[67.47606067749545,8.937013931104635],[67.61659842551295,8.79647618308713],[67.86956637194446,8.543508236655622],[68.23496451678997,8.206217641413613],[68.45982491361798,7.868927046171603],[68.57225511203198,7.672174198947096],[68.68468531044599,7.250560954894584],[68.740900409653,6.660302413221066],[68.740900409653,6.09815142115105],[68.68468531044599,5.76086082590904],[68.60036266163549,5.311140032253026],[68.48793246322148,4.945741887407516],[68.40360981441098,4.552236192958504],[68.23496451678997,4.046300300095489],[68.06631921916896,3.456041758421971],[68.01010411996195,3.2311813615939644],[67.92578147115145,2.978213415162457],[67.89767392154796,2.865783216748454],[67.89767392154796,2.8376756671449526],[67.86956637194446,2.809568117541452],[67.86956637194446,2.7533530183344506],[67.86956637194446,2.7252454687309493],[67.86956637194446,2.697137919127449],[67.86956637194446,2.697137919127449],[67.89767392154796,2.697137919127449],[67.95388902075496,2.7252454687309493],[67.98199657035846,2.7252454687309493],[67.98199657035846,2.6690303695239477],[68.03821166956547,2.5847077207134452],[68.09442676877246,2.472277522299442],[68.15064186797946,2.3598473238854387],[68.17874941758298,2.303632224678437],[68.23496451678997,2.191202026264434],[68.31928716560047,2.0506642782469298],[68.34739471520398,1.9382340798329265],[68.37550226480747,1.8820189806259249],[68.40360981441098,1.825803881418923],[68.40360981441098,1.7976963318154222],[68.40360981441098,1.7976963318154222],[68.40360981441098,1.7695887822119214]]}],"properties":{"type":"room"}},{"geometries":[{"type":"brush","coordinates":[[64.94638121318037,11.579123593833712],[64.86205856436987,11.579123593833712],[64.69341326674886,11.551016044230211],[64.52476796912786,11.52290849462671],[64.41233777071385,11.49480094502321],[64.27180002269635,11.466693395419709],[64.13126227467885,11.410478296212709],[63.90640187785084,11.326155647402205],[63.73775658022984,11.269940548195203],[63.484788633798324,11.185617899384702],[63.203713137763316,11.101295250574198],[62.95074519133182,11.045080151367197],[62.669669695296804,11.045080151367197],[62.5291319472793,11.045080151367197],[62.332379100054794,11.045080151367197],[62.19184135203729,11.045080151367197],[62.13562625283029,11.045080151367197],[62.051303604019786,11.045080151367197],[61.91076585600228,11.045080151367197],[61.82644320719178,11.045080151367197],[61.74212055838128,11.045080151367197],[61.62969035996727,11.045080151367197],[61.57347526076027,11.045080151367197],[61.517260161553274,11.016972601763696],[61.48915261194976,11.016972601763696],[61.43293751274277,11.016972601763696],[61.404829963139264,11.016972601763696],[61.34861486393227,10.988865052160197],[61.29239976472526,10.988865052160197],[61.236184665518266,10.960757502556694],[61.20807711591476,10.960757502556694],[61.067539367897254,10.904542403349692],[60.98321671908675,10.904542403349692],[60.95510916948326,10.876434853746192],[60.87078652067275,10.84832730414269],[60.81457142146575,10.84832730414269],[60.75835632225874,10.82021975453919],[60.70214122305175,10.82021975453919],[60.645926123844745,10.82021975453919],[60.589711024637744,10.82021975453919],[60.53349592543074,10.84832730414269],[60.505388375827245,10.84832730414269],[60.42106572701674,10.876434853746192],[60.33674307820623,10.904542403349692],[60.28052797899923,10.932649952953193],[60.22431287979224,10.988865052160197],[60.111882681378226,11.045080151367197],[60.02756003256773,11.129402800177699],[59.94323738375723,11.185617899384702],[59.88702228455022,11.241832998591702],[59.83080718534322,11.326155647402205],[59.74648453653272,11.466693395419709],[59.69026943732571,11.579123593833712],[59.634054338118716,11.719661341851216],[59.60594678851521,11.832091540265221],[59.577839238911714,11.888306639472223],[59.54973168930821,11.972629288282723],[59.52162413970471,12.028844387489727],[59.49351659010121,12.056951937093228],[59.465409040497704,12.085059486696728],[59.40919394129071,12.141274585903728],[59.381086391687205,12.19748968511073],[59.3248712924802,12.253704784317733],[59.2686561932732,12.338027433128236],[59.2124410940662,12.422350081938738],[59.2124410940662,12.50667273074924],[59.2124410940662,12.590995379559741],[59.184333544462696,12.703425577973746],[59.184333544462696,12.84396332599125],[59.184333544462696,12.984501074008755],[59.184333544462696,13.096931272422758],[59.184333544462696,13.18125392123326],[59.184333544462696,13.237469020440262],[59.184333544462696,13.293684119647263],[59.184333544462696,13.321791669250764],[59.2124410940662,13.378006768457766],[59.2124410940662,13.46232941726827],[59.240548643669705,13.54665206607877],[59.2686561932732,13.630974714889273],[59.296763742876706,13.687189814096277],[59.296763742876706,13.743404913303277],[59.3248712924802,13.771512462906777],[59.3248712924802,13.827727562113779],[59.40919394129071,13.85583511171728],[59.49351659010121,13.940157760527784],[59.634054338118716,14.024480409338285],[59.858914734946715,14.13691060775229],[60.22431287979224,14.361771004580296],[60.589711024637744,14.558523851804802],[60.89889407027625,14.727169149425807],[61.123754467104256,14.83959934783981],[61.34861486393227,14.895814447046812],[61.404829963139264,14.923921996650312],[61.62969035996727,14.980137095857314],[61.79833565758828,15.008244645460815],[61.96698095520928,15.036352195064316],[62.07941115362328,15.036352195064316],[62.21994890164079,15.008244645460815],[62.41670174886529,14.867706897443309],[62.585347046486305,14.755276699029308],[62.6977772449003,14.670954050218803],[62.78209989371081,14.586631401408303],[62.83831499291781,14.5023087525978],[62.92263764172831,14.389878554183797],[63.03506784014232,14.277448355769794],[63.14749803855632,14.13691060775229],[63.28803578657382,13.996372859734784],[63.400465984987825,13.85583511171728],[63.51289618340183,13.715297363699777],[63.56911128260882,13.602867165285772],[63.62532638181583,13.51854451647527],[63.68154148102283,13.406114318061267],[63.73775658022984,13.293684119647263],[63.82207922904034,13.18125392123326],[63.87829432824734,13.040716173215758],[63.934509427454344,12.928285974801753],[63.96261697705784,12.872070875594751],[64.04693962586835,12.759640677180748],[64.13126227467885,12.647210478766745],[64.21558492348935,12.47856518114574],[64.29990757229986,12.338027433128236],[64.38423022111036,12.225597234714233],[64.49666041952436,12.056951937093228],[64.60909061793836,11.916414189075722],[64.69341326674886,11.80398399066172],[64.83395101476637,11.635338693040715],[64.91827366357687,11.551016044230211],[64.97448876278388,11.466693395419709],[65.05881141159438,11.410478296212709],[65.08691896119788,11.382370746609208],[65.11502651080137,11.354263197005706],[65.11502651080137,11.354263197005706]]}],"properties":{"type":"room"}},{"geometries":[{"type":"ellipse","coordinates":[[59.5,15],[64.5,10.5]]}],"properties":{"type":"room"}},{"geometries":[{"type":"line","coordinates":[[40.5,14],[42,14]]},{"type":"door","coordinates":[[40.5,14],[42,14]],"subtype":"secret"}],"properties":{"type":"other"}}]}]}')},,,,,,,,,,,function(e,t,n){e.exports=n(133)},,,,,function(e,t,n){},,,,,,,,function(e,t){},,,,,,,,,,,,function(e,t,n){var o=n(101);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._1T682EN3wGuui_M4H8-h4d {\n    background: transparent;\n    border: none;\n    outline: none;\n    margin: 4px;\n    padding: 8px 12px;\n    color: white;\n    font-size: 18px;\n    font-weight: 600;\n    box-sizing: border-box;\n    border-radius: 2px;\n    box-shadow: 0 2px 2px 0 rgba(255,255,255,0.14), 0 3px 1px -2px rgba(255,255,255,0.12), 0 1px 5px 0 rgba(255,255,255,0.2);\n  }\n\n  ._1T682EN3wGuui_M4H8-h4d:hover {\n    background: #505050;\n    box-shadow: 0 3px 3px 0 rgba(255,255,255,0.14), 0 1px 7px 0 rgba(255,255,255,0.12), 0 3px 1px -1px rgba(255,255,255,0.2);\n  }\n\n  ._1T682EN3wGuui_M4H8-h4d:active {\n    outline: none;\n    box-shadow: -3px -3px 8px rgba(255, 255, 255, 0.9), 3px 3px 8px rgba(255, 255, 255, 0.9);\n  }\n\n  ._3y7SXyz4JOCnc5uHwMgV6G {\n    background: transparent;\n    border: none;\n    outline: none;\n    margin: 4px;\n    color: white;\n    font-size: 18px;\n    font-weight: 600;\n    box-sizing: border-box;\n    border-radius: 2px;\n    box-shadow: 0 2px 2px 0 rgba(255,255,255,0.14), 0 3px 1px -2px rgba(255,255,255,0.12), 0 1px 5px 0 rgba(255,255,255,0.2);\n  }\n\n  ._3y7SXyz4JOCnc5uHwMgV6G:hover {\n    background: #505050;\n    box-shadow: 0 3px 3px 0 rgba(255,255,255,0.14), 0 1px 7px 0 rgba(255,255,255,0.12), 0 3px 1px -1px rgba(255,255,255,0.2);\n  }\n\n  ._3y7SXyz4JOCnc5uHwMgV6G:active {\n    outline: none;\n    box-shadow: -3px -3px 8px rgba(255, 255, 255, 0.9), 3px 3px 8px rgba(255, 255, 255, 0.9);\n  }\n\n  ._23Y2hTXZx4yRztG6Og2hsX {\n    background: #A20B25;\n  }\n\n  ._23Y2hTXZx4yRztG6Og2hsX:hover {\n    background: #a03e4e;\n  }\n\n  ._3TM3EDP4hscy9_4eMYFQ4j {\n    font-size: 18px;\n    background: transparent;\n    color: white;\n    border: none;\n    border-bottom: 1px solid white;\n    padding: 4px;\n    margin: 4px;\n    margin-bottom: 1px;\n  }\n  \n  ._3TM3EDP4hscy9_4eMYFQ4j:focus {\n    outline: none;\n    border-bottom: 2px solid white;\n    margin-bottom: 0px;\n  }\n\n  ._1QialzHq4mUm3mfxM9dFjo {\n    display: flex;\n    flex-direction: column;\n    background: #000;\n    border-radius: 12px;\n    padding: 8px;\n    box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.2);\n    color: white;\n  }\n  ._1QialzHq4mUm3mfxM9dFjo svg {\n    color: white;\n    font-size: 24px;\n  }\n  ._1QialzHq4mUm3mfxM9dFjo .y38q2UbGKcnf8XF1TwQCQ svg {\n    color: black;\n  }\n  ._1QialzHq4mUm3mfxM9dFjo button {\n    background: black;\n    width: 50px;\n    height: 50px;\n    border: 1px solid white;\n    outline: none;\n    margin: 4px;\n  }\n  ._1QialzHq4mUm3mfxM9dFjo button:hover {\n    background: #505050;\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\n  }\n  ._1QialzHq4mUm3mfxM9dFjo button:active {\n    outline: none;\n    border: none;\n    scale: 0.9;\n  }\n  ._1QialzHq4mUm3mfxM9dFjo button.y38q2UbGKcnf8XF1TwQCQ {\n    background: #bbb;\n    box-shadow: -1px -1px 8px rgba(255, 255, 255, 0.5), 1px 1px 8px rgba(255, 255, 255, 0.5);\n  }\n  ._1QialzHq4mUm3mfxM9dFjo button[disabled] {\n    background: #444;\n    box-shadow: none;\n  }\n",""]),t.locals={button:"_1T682EN3wGuui_M4H8-h4d",buttonSmall:"_3y7SXyz4JOCnc5uHwMgV6G",danger:"_23Y2hTXZx4yRztG6Og2hsX",input:"_3TM3EDP4hscy9_4eMYFQ4j",toolbar:"_1QialzHq4mUm3mfxM9dFjo",selected:"y38q2UbGKcnf8XF1TwQCQ"},e.exports=t},,function(e,t,n){var o=n(104);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._1UqzVcjxvXSzZbvZKvXYKi button {\n    background: black;\n    width: 24px;\n    height: 24px;\n    border: 1px solid white;\n    outline: none;\n    margin: 4px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n  }\n  ._1UqzVcjxvXSzZbvZKvXYKi svg {\n    color: white;\n    font-size: 12px;\n  }\n  ._1UqzVcjxvXSzZbvZKvXYKi button:hover {\n    background: #505050;\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\n  }\n  ._1UqzVcjxvXSzZbvZKvXYKi button:active {\n    outline: none;\n    border: none;\n    scale: 0.9;\n  }\n",""]),t.locals={zoom:"_1UqzVcjxvXSzZbvZKvXYKi"},e.exports=t},function(e,t,n){var o=n(106);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._3IlFEbyxwjKJ9Sy-1JAUwL {\n    margin: 0;\n    padding: 0 8px;\n    color: white;\n  }\n  ._3IlFEbyxwjKJ9Sy-1JAUwL h1 {\n    font-size: 24px;\n    font-family: Helvetica serif;\n    padding: 0 8px;\n    margin: 0;\n    color: white;\n  }\n  ._3IlFEbyxwjKJ9Sy-1JAUwL p {\n    font-size: 18px;\n    font-family: Helvetica serif;\n    padding: 0;\n    margin: 0;\n  }\n",""]),t.locals={formattedText:"_3IlFEbyxwjKJ9Sy-1JAUwL"},e.exports=t},function(e,t,n){var o=n(108);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._3W5IvxPia75NSEZmFXoBmA {\n    display: flex;\n    flex-direction: column;\n  }\n  ._3W5IvxPia75NSEZmFXoBmA textarea {\n    height: 400px;\n    outline: none;\n    border: none;\n  }\n  ._3N02lA9zkh_pv4M7FdSKFQ {\n    font-family: Helvetica serif;\n    font-size: 24px;\n    color: white;\n    padding: 8px;\n  }\n  ._1QtaoYNAGXwdUqEuaQejp4 {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin: 12px 24px;\n  }\n",""]),t.locals={editor:"_3W5IvxPia75NSEZmFXoBmA",name:"_3N02lA9zkh_pv4M7FdSKFQ",actions:"_1QtaoYNAGXwdUqEuaQejp4"},e.exports=t},function(e,t,n){var o=n(110);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._3ZJnUkz9JITQGyOviOpcbX {\n    font-family: Helvetica serif;\n    font-size: 18px;\n    color: white;\n    padding: 8px;\n  }\n",""]),t.locals={features:"_3ZJnUkz9JITQGyOviOpcbX"},e.exports=t},,function(e,t,n){var o=n(113);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._7wQ_KhraOD7XNV_7Gcnj4 {\n    width: 0;\n    margin: 8px 0;\n    position: absolute;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    background: #373737;\n    box-sizing: border-box;\n    transition: .2s ease-out;\n  }\n    ._7wQ_KhraOD7XNV_7Gcnj4._1MlyHLj10SQkIHXsiINIx1 {\n      transition: .2s ease-out;\n      z-index: 100;\n    }\n  ._2I5tLfqZmuI4hmhaiAXBzH {\n    position: absolute;\n    top: 0;\n    left: -27px;\n    background: #373737;\n    color: white;\n    outline: none;\n    border: none;\n    font-size: 30px;\n    padding: 8px;\n    border-radius: 4px 0 0 4px;\n  }\n  .NsuFqULDSfAB5HIY7HbUg {\n    height: 97%;\n    overflow: scroll;\n    padding: 8px;\n  }\n",""]),t.locals={drawer:"_7wQ_KhraOD7XNV_7Gcnj4",open:"_1MlyHLj10SQkIHXsiINIx1",toggleButton:"_2I5tLfqZmuI4hmhaiAXBzH",editors:"NsuFqULDSfAB5HIY7HbUg"},e.exports=t},function(e,t,n){var o=n(115);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._38X7Ih6LgSulEuEtueMD2U {\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    background: #000;\n    border-radius: 12px;\n    margin-bottom: 50px;\n    margin-left: 24px;\n    padding: 8px;\n    box-shadow: 4px 4px 6px rgba(0, 0, 0, 0.2);\n    color: white;\n  }\n  ._38X7Ih6LgSulEuEtueMD2U svg {\n    color: white;\n    font-size: 12px;\n  }\n  ._38X7Ih6LgSulEuEtueMD2U button {\n    background: black;\n    width: 24px;\n    height: 24px;\n    border: 1px solid white;\n    outline: none;\n    margin: 4px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n  }\n  ._38X7Ih6LgSulEuEtueMD2U button:hover {\n    background: #505050;\n    box-shadow: -2px -2px 8px rgba(255, 255, 255, 0.9), 2px 2px 8px rgba(255, 255, 255, 0.9);\n  }\n  ._38X7Ih6LgSulEuEtueMD2U button:active {\n    outline: none;\n    border: none;\n    scale: 0.9;\n  }\n  ._38X7Ih6LgSulEuEtueMD2U button.X3vmDKNXaSrZpzJYj5SqK {\n    color: black;\n    background: #bbb;\n    box-shadow: -1px -1px 8px rgba(255, 255, 255, 0.5), 1px 1px 8px rgba(255, 255, 255, 0.5);\n  }\n  ._38X7Ih6LgSulEuEtueMD2U h4 {\n    margin: 0;\n    padding: 0;\n  }\n  ._32AnUS1IZ28UbU4adMP6GT {\n    display: flex;\n    align-items: center;\n  }\n  button._2XSEgiWqLvufrbRqULO4Ng {\n    outline: none;\n    border: none;\n  }\n  ._2XSEgiWqLvufrbRqULO4Ng:hover {\n    cursor: pointer;\n    text-decoration: underline;\n  }\n",""]),t.locals={levels:"_38X7Ih6LgSulEuEtueMD2U",selected:"X3vmDKNXaSrZpzJYj5SqK",level:"_32AnUS1IZ28UbU4adMP6GT",link:"_2XSEgiWqLvufrbRqULO4Ng"},e.exports=t},function(e,t,n){var o=n(117);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._1429OEOGcRhOAV0J3Gg-KT {\n    position: fixed;\n    z-index: 1000;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    background-color: rgba(0, 0, 0, 0.4);\n  }\n\n  ._1DN0JTMd6pHMuwsTOAvt2j {\n    position: relative;\n    background-color: #373737;\n    color: #fff;\n    margin: 64px auto;\n    padding: 0 20px 20px 20px;\n    border: 1px solid #888;\n    border-radius: 8px;\n    width: 60%;\n  }\n\n  ._1DN0JTMd6pHMuwsTOAvt2j button {\n    outline: none;\n    border: none;\n    background-color: transparent;\n    color: #fff;\n    font-size: 24px;\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    text-decoration: none;\n    cursor: pointer;\n  }\n",""]),t.locals={modal:"_1429OEOGcRhOAV0J3Gg-KT",modalContent:"_1DN0JTMd6pHMuwsTOAvt2j"},e.exports=t},function(e,t,n){var o=n(119);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._2aM8m-4Xx92dNWnaEGRNME {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    background: #373737;\n    padding: 2px;\n    width: 100%;\n  }\n  ._3HEPmFe0KP_qc9LRO7uwIh {\n    color: white;\n    margin: 8px 24px 8px 24px;\n  }\n  .yr0iF51zaJ_HOYfzQrmAp {\n    margin-left: auto;\n    margin-right: 24px;\n  }\n  label {\n    color: white;\n  }\n  ._2HSpHXCXB2uWq9tBHwycOe:hover {\n    text-decoration: underline;\n    cursor: pointer;\n  }\n",""]),t.locals={menubar:"_2aM8m-4Xx92dNWnaEGRNME",title:"_3HEPmFe0KP_qc9LRO7uwIh",debugMenu:"yr0iF51zaJ_HOYfzQrmAp",mapLink:"_2HSpHXCXB2uWq9tBHwycOe"},e.exports=t},,function(e,t,n){var o=n(122);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._1bKtBCtBoCYJg7vkFGtY1S {\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    padding: 8px;\n    z-index: 1;\n  }\n  ._1bKtBCtBoCYJg7vkFGtY1S svg {\n    color: #505050;\n    font-size: 24px;\n  }\n  ._1bKtBCtBoCYJg7vkFGtY1S button {\n    background: transparent;\n    outline: none;\n    border: none; \n    display: flex;\n    margin: 2px;\n    align-items: center;\n    justify-content: center;\n    width: 24px;\n    height: 24px;\n  }\n  ._1bKtBCtBoCYJg7vkFGtY1S button:hover svg {\n    color: #000;\n  }\n",""]),t.locals={home:"_1bKtBCtBoCYJg7vkFGtY1S"},e.exports=t},function(e,t,n){var o=n(124);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._2LtiBs0QFy0T6xn0SS2W3x {\n    display: flex;\n    flex-direction: column;\n    font-family: Helvetica serif;\n  }\n  ._6Z9YH7Qxp_AWrunyTXjc7 {\n    width: 8in;\n    height: 10.5in;\n    display: flex;\n    flex-direction: column;\n    margin-left: auto;\n    margin-right: auto;\n    border-bottom: 1px solid black;\n    padding: 0.25in;\n  }\n  @media print {\n    ._6Z9YH7Qxp_AWrunyTXjc7 {\n      border-bottom: none !important;\n    }\n  }\n  ._16g_MaPE_LtUpqw4wDWuQu {\n    width: 8in;\n    display: flex;\n    flex-direction: column;\n    margin-left: auto;\n    margin-right: auto;\n    padding: 0.25in;\n  }\n",""]),t.locals={print:"_2LtiBs0QFy0T6xn0SS2W3x",page:"_6Z9YH7Qxp_AWrunyTXjc7",pages:"_16g_MaPE_LtUpqw4wDWuQu"},e.exports=t},function(e,t,n){var o=n(126);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._32RqLWb9TAlxHXLXW5Y7tH {\n    display: flex;\n    flex-direction: column;\n  }\n  ._32RqLWb9TAlxHXLXW5Y7tH a {\n    color: white;\n  }\n  ._32RqLWb9TAlxHXLXW5Y7tH li {\n    padding: 4px;\n  }\n  ._21_Zg-ByTQDDzrT0uY_Ufj {\n    font-size: 16px;\n    margin-left: auto;\n    margin-right: auto;\n  }\n",""]),t.locals={welcomePage:"_32RqLWb9TAlxHXLXW5Y7tH",footer:"_21_Zg-ByTQDDzrT0uY_Ufj"},e.exports=t},function(e,t,n){var o=n(128);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._28mF98z4gM6RA9OdY-YuEy {\n    color: white;\n    background: black;\n    border-radius: 4px;\n    padding: 8px;\n  }\n",""]),t.locals={tooltip:"_28mF98z4gM6RA9OdY-YuEy"},e.exports=t},function(e,t,n){var o=n(130);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,'\n  ._1v-ohDNr7AFbOSKLT0CYxX {\n    position: relative;\n    display: inline-block;\n    width: 100%;\n    height: 34px;\n  }\n\n  ._1v-ohDNr7AFbOSKLT0CYxX input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  ._2w1KenDtBt0Wyo3aJE-FRz {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ccc;\n    -webkit-transition: .4s;\n    transition: .4s;\n    border-radius: 34px;\n  }\n\n  ._2w1KenDtBt0Wyo3aJE-FRz:before {\n    position: absolute;\n    content: "";\n    height: 26px;\n    width: 26px;\n    left: 4px;\n    bottom: 4px;\n    background-color: white;\n    -webkit-transition: .4s;\n    transition: .4s;\n    border-radius: 50%;\n  }\n\n  ._1v-ohDNr7AFbOSKLT0CYxX input:checked + ._2w1KenDtBt0Wyo3aJE-FRz {\n    background-color: #2196F3;\n  }\n\n  ._1v-ohDNr7AFbOSKLT0CYxX input:focus + ._2w1KenDtBt0Wyo3aJE-FRz {\n    box-shadow: 0 0 1px #2196F3;\n  }\n\n  ._1v-ohDNr7AFbOSKLT0CYxX input:checked + ._2w1KenDtBt0Wyo3aJE-FRz:before {\n    -webkit-transform: translateX(26px);\n    -ms-transform: translateX(26px);\n    transform: translateX(26px);\n  }\n',""]),t.locals={toggle:"_1v-ohDNr7AFbOSKLT0CYxX",slider:"_2w1KenDtBt0Wyo3aJE-FRz"},e.exports=t},function(e,t,n){var o=n(132);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(17)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(t=n(16)(!1)).push([e.i,"\n  ._1K0xKFlE3XhuIq8I1FpjrW {\n    width: 100vw;\n    height: 100vh;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n  }\n  ._21qBYvi1wyLFQ2lvKpGD4N {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n  }\n",""]),t.locals={app:"_1K0xKFlE3XhuIq8I1FpjrW",canvasWrapper:"_21qBYvi1wyLFQ2lvKpGD4N"},e.exports=t},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(32),i=n.n(a),s=n(142),l=n(70),c=(n(80),n(2)),p=n(52),d=n(12),u=n(19),h=n(10),m=n(45),f=n(46),v=n(62),y=n.n(v),g=n(63);function b(e,t){return Math.sqrt(function(e,t){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}(e,t))}function x(e,t,n){return t+(n-t)*e}function w(e,t,n){return[x(e,t[0],n[0]),x(e,t[1],n[1])]}function O(e,t,n){return e<t?t:e>n?n:e}function E(e,t){if(e<0||e>=256)throw new Error("Index out of range");if(t<0||t>=256)throw new Error("Index out of range");return"rgb(".concat(e,", ").concat(t,", 0)")}function S(e){var t=Math.min.apply(Math,Object(u.a)(e.map((function(e){return e[0]})))),n=Math.max.apply(Math,Object(u.a)(e.map((function(e){return e[0]})))),o=Math.min.apply(Math,Object(u.a)(e.map((function(e){return e[1]})))),r=Math.max.apply(Math,Object(u.a)(e.map((function(e){return e[1]}))));return{sw:[t,r],ne:[n,o],w:n-t,h:r-o}}function k(e){var t=0;return e.slice(0,e.length-1).forEach((function(n,o){var r=Object(c.a)(e[o+1],2),a=r[0],i=r[1];t+=n[0]*i-a*n[1]})),t<0}function j(e){return{regions:e.map((function(e){return e.coordinates})),inverted:!1}}function I(e,t,n){var o=[e[0]-t[0],e[1]-t[1]],r=[n[0]-t[0],n[1]-t[1]],a=O((o[0]*r[0]+o[1]*r[1])/(r[0]*r[0]+r[1]*r[1]),0,1),i=[t[0]+r[0]*a,t[1]+r[1]*a];return{point:i,distance:b(i,e)}}function M(e,t){return t.map((function(n,o){return Object(h.a)(Object(h.a)({},I(e,n,t[(o+1)%t.length])),{},{line:[o,(o+1)%t.length]})})).sort((function(e,t){return e.distance-t.distance}))[0]}function D(e,t,n){var o=t.flatMap((function(t,n){return t.geometries.flatMap((function(t,o){return"polygon"===t.type?{feature:n,geometry:o,closestPoint:M(e,t.coordinates)}:"line"===t.type?{feature:n,geometry:o,closestPoint:Object(h.a)(Object(h.a)({},I(e,t.coordinates[0],t.coordinates[1])),{},{line:[0,1]})}:void 0}))})).sort((function(e,t){return void 0===e||void 0===t?1/0:e.closestPoint.distance-t.closestPoint.distance}))[0];if(o)return function(e,t,n){var o=t[e.feature].geometries[e.geometry];if(!["polygon","line"].includes(o.type))return;var r=o.coordinates,a=r[e.closestPoint.line[0]],i=r[e.closestPoint.line[1]];if(n)return Object(h.a)(Object(h.a)({},e),{},{from:Object(u.a)(a),to:Object(u.a)(i)});var s=e.closestPoint.point,l=(i[1]-a[1])/(i[0]-a[0]),c=Math.floor(s[1])-a[1],p=c/l,d=Math.ceil(s[1])-a[1],m=d/l,f=Math.floor(s[0])-a[0],v=f*l,y=Math.ceil(s[0])-a[0],g=y*l,x=[a[0]+p,a[1]+c],w=[a[0]+m,a[1]+d],O=b(x,w),E=[a[0]+f,a[1]+v],S=[a[0]+y,a[1]+g],k=b(E,S);if((isNaN(k)||O<=k)&&O>0)return Object(h.a)(Object(h.a)({},e),{},{from:x,to:w});if((isNaN(O)||k<O)&&k>0)return Object(h.a)(Object(h.a)({},e),{},{from:E,to:S});return}(o,t,n)}function T(e){var t=e.geometries.find((function(e){return"polygon"===e.type})),n=e.geometries.find((function(e){return"ellipse"===e.type})),o=e.geometries.find((function(e){return"brush"===e.type}));return t?function(e){for(var t=0,n=0,o=0,r=0,a=e.length-1;r<e.length;a=r++){var i=e[r],s=e[a],l=i[0]*s[1]-s[0]*i[1];t+=l,n+=(i[0]+s[0])*l,o+=(i[1]+s[1])*l}var c=3*t;return[n/c,o/c]}(t.coordinates):n?[n.coordinates[0][0]+(n.coordinates[1][0]-n.coordinates[0][0])/2,n.coordinates[0][1]+(n.coordinates[1][1]-n.coordinates[0][1])/2]:o?o.coordinates[Math.round(o.coordinates.length/2)]:void 0}var C,_,P,N,L,F,z,X,W,K,H,A,U,B,G,q,Y,J,R,Q,Z,V,$,ee,te,ne,oe,re,ae,ie=n(7),se=n(65),le=n(64),ce=[],pe=[];function de(e){return function(t,n,o){var r=o.value;o.value=function(){var t=Array.from(arguments);this.setState(Object(se.a)(this,(function(n){var o=JSON.stringify(n.maps[n.selection.mapIndex]);r.bind(n).apply(void 0,Object(u.a)(t));var a=JSON.stringify(n.maps[n.selection.mapIndex]);e&&e.undoable&&(0===ce.length||ce[ce.length-1]!==o)&&a!==o&&(ce.push(o),ce.length>100&&ce.splice(0,ce.length-100)),n.hasOwnProperty("notifyChange")&&n.notifyChange()})))}}}var ue=(C=de(),_=de(),P=de(),N=de(),L=de(),F=de({undoable:!0}),z=de(),X=de({undoable:!0}),W=de(),K=de(),H=de({undoable:!0}),A=de({undoable:!0}),U=de({undoable:!0}),B=de({undoable:!0}),G=de({undoable:!0}),q=de({undoable:!0}),Y=de(),J=de(),R=de(),Q=de(),Z=de(),V=de(),$=de(),ee=de(),te=de(),ne=de(),oe=de(),re=de(),ae=function(){function e(){Object(m.a)(this,e),this.tools={pointer:{selected:!0,group:0,polygon:!0,disabled:!1},walls:{selected:!1,group:1,polygon:!0,disabled:!1},stairs:{selected:!1,group:1,polygon:!1,disabled:!1},doors:{selected:!1,group:1,polygon:!1,disabled:!1,subtype:"normal"},decoration:{selected:!1,group:1,polygon:!1,disabled:!1,subtype:"statue"},brush:{selected:!1,group:2,polygon:!0,disabled:!1},rect:{selected:!1,group:2,polygon:!0,disabled:!1},polygon:{selected:!1,group:2,polygon:!0,disabled:!1},ellipse:{selected:!1,group:2,polygon:!0,disabled:!1}},this.scale=1,this.offset=[0,0],this.maps=[le],this.drawerOpen=!1,this.drawerWidth=400,this.selection={mapIndex:0,levelIndex:0,featureIndex:void 0,geometryIndex:void 0,ghostLevels:{}},this.gridSteps=1,this.debug=!1,this.showWelcome=!0,this.setState=function(e){},this.notifyChange=function(){}}return Object(f.a)(e,[{key:"getSelectedFeature",value:function(){if(void 0!==this.selection.featureIndex&&void 0!==this.selection.geometryIndex){var e=this.maps[this.selection.mapIndex].levels[this.selection.levelIndex].features[this.selection.featureIndex];return{feature:e,geometry:e.geometries[this.selection.geometryIndex]}}}},{key:"export",value:function(){var e="data:text/json;charset=utf-8,",t=this.maps[this.selection.mapIndex];e+=encodeURIComponent(JSON.stringify(t));var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download","".concat(t.name||"Untitled Map",".json")),document.body.appendChild(n),n.click(),n.remove()}},{key:"save",value:function(e){this.maps[this.selection.mapIndex].name=e,(""!==this.maps[this.maps.length-1].name||this.maps[this.maps.length-1].levels[0].features.length>0)&&this.maps.push({name:"",description:"",levels:[{features:[]}]})}},{key:"undo",value:function(){if(0!==ce.length){var e=ce.pop();e&&(pe.push(JSON.parse(JSON.stringify(this.maps[this.selection.mapIndex]))),pe.length>10&&pe.splice(0,ce.length-10),this.maps[this.selection.mapIndex]=JSON.parse(e))}}},{key:"redo",value:function(){if(0!==pe.length){var e=pe.pop();ce.push(JSON.parse(JSON.stringify(this.maps[this.selection.mapIndex]))),ce.length>10&&ce.splice(0,ce.length-10),e&&(this.maps[this.selection.mapIndex]=JSON.parse(e))}}},{key:"toggleWelcome",value:function(){this.showWelcome=!this.showWelcome}},{key:"newMap",value:function(){ce=[],pe=[],(""!==this.maps[this.maps.length-1].name||this.maps[this.maps.length-1].levels[0].features.length>0)&&this.maps.push({name:"",description:"",levels:[{features:[]}]}),this.selection={mapIndex:this.maps.length-1,levelIndex:0,featureIndex:void 0,geometryIndex:void 0,ghostLevels:{}},this.scale=1,this.offset=[0,0]}},{key:"addLevel",value:function(){this.maps[this.selection.mapIndex].levels.push({features:[]}),this.selection.levelIndex=this.maps[this.selection.mapIndex].levels.length-1,this.selection.featureIndex=void 0,this.selection.geometryIndex=void 0}},{key:"selectLevel",value:function(e){this.selection.levelIndex=e,this.selection.featureIndex=void 0,this.selection.geometryIndex=void 0}},{key:"removeLevel",value:function(e){var t=this.maps[this.selection.mapIndex].levels;t.length<=1||(t.splice(e,1),this.selection.levelIndex===t.length&&this.selection.levelIndex--,this.selection.featureIndex=void 0,this.selection.geometryIndex=void 0)}},{key:"setDebug",value:function(e){this.debug=e}},{key:"setGridSteps",value:function(e){this.gridSteps=e}},{key:"handleDrag",value:function(e,t){if(e[0]!==t[0]||e[1]!==t[1]){var n=this.maps[this.selection.mapIndex].levels[this.selection.levelIndex].features;if(this.tools.stairs.selected)n.push({properties:{type:"other"},geometries:[{type:"stairs",coordinates:[e,t]}]});else if(this.tools.decoration.selected)n.push({properties:{type:"other"},geometries:[{type:"decoration",coordinates:[e,t],subtype:this.tools.decoration.subtype}]});else if(this.tools.rect.selected)n.push({geometries:[{type:"polygon",coordinates:[[e[0],e[1]],[t[0],e[1]],[t[0],t[1]],[e[0],t[1]],[e[0],e[1]]]}],properties:{type:"room"}});else if(this.tools.ellipse.selected)n.push({geometries:[{type:"ellipse",coordinates:[e,t]}],properties:{type:"room"}});else if(this.tools.walls.selected)n.push({geometries:[{type:"line",coordinates:[e,t]}],properties:{type:"other"}});else if(void 0!==this.selection.featureIndex){var o=n[this.selection.featureIndex];if(void 0!==o){var r=[t[0]-e[0],t[1]-e[1]];return void o.geometries.forEach((function(e){e.coordinates.forEach((function(e){e[0]+=r[0],e[1]+=r[1]}))}))}}}}},{key:"handlePolygon",value:function(e){var t=this.maps[this.selection.mapIndex].levels[this.selection.levelIndex].features;k(e)||e.reverse(),t.push({geometries:[{type:"polygon",coordinates:e}],properties:{type:this.tools.walls.selected?"room":"other"}})}},{key:"handleBrush",value:function(e){var t=this.maps[this.selection.mapIndex].levels[this.selection.levelIndex].features;this.tools.walls.selected&&this.tools.brush.selected&&t.push({geometries:[{type:"brush",coordinates:e}],properties:{type:"room"}})}},{key:"handleDelete",value:function(){var e=this.maps[this.selection.mapIndex].levels[this.selection.levelIndex].features;if(void 0!==this.selection.featureIndex&&void 0!==this.selection.geometryIndex){var t=e[this.selection.featureIndex];0===this.selection.geometryIndex||1===t.geometries.length?e.splice(this.selection.featureIndex,1):t.geometries.splice(this.selection.geometryIndex,1),this.selection.featureIndex=void 0,this.selection.geometryIndex=void 0}}},{key:"addDoor",value:function(e){this.maps[this.selection.mapIndex].levels[this.selection.levelIndex].features[e.feature].geometries.push({type:"door",coordinates:[e.from,e.to],subtype:this.tools.doors.subtype})}},{key:"handleGroup",value:function(e,t){var n=this.maps[this.selection.mapIndex].levels[this.selection.levelIndex].features;if(void 0!==this.selection.featureIndex&&void 0!==this.selection.geometryIndex){var o=n[this.selection.featureIndex];if(this.selection.featureIndex===e){if(1===o.geometries.length)return;var r=o.geometries[t];o.geometries.splice(t,1),n.push({properties:{type:["polygon","ellipse"].includes(r.type)?"room":"other"},geometries:[r]})}else{var a=o.geometries.find((function(e){return"polygon"===e.type})),i=n[e].geometries[t];if(a&&"polygon"===i.type){var s=function(e,t){var n=g.union(j(e),j([t])).regions.map((function(e){return{type:"polygon",coordinates:e}}));return n.sort((function(e,t){return"polygon"===e.type&&"polygon"!==t.type?-1:"polygon"===t.type&&"polygon"!==e.type?1:"polygon"!==e.type&&"polygon"!==t.type||k(e.coordinates)&&k(t.coordinates)?0:k(e.coordinates)&&!k(t.coordinates)?-1:1})),n.forEach((function(e){"polygon"===e.type&&e.coordinates[0]!==e.coordinates[e.coordinates.length-1]&&e.coordinates.push([e.coordinates[0][0],e.coordinates[0][1]])})),n}(o.geometries.filter((function(e){return"polygon"===e.type})),i),l=o.geometries.filter((function(e){return"polygon"!==e.type}));o.geometries=l.concat(s)}else o.geometries=o.geometries.concat(n[e].geometries);n.splice(e,1),this.selection.featureIndex>e&&this.selection.featureIndex--}}}},{key:"setSelectedTool",value:function(e){var t=this.tools[e];if(t.selected)t.selected=!1;else{if(0===t.group)return Object.values(this.tools).forEach((function(e){e.selected=!1})),void(t.selected=!0);Object.values(this.tools).forEach((function(e){0===e.group&&(e.selected=!1)})),Object.values(this.tools).forEach((function(e){e.group===t.group&&(e.selected=!1)})),t.polygon?Object.values(this.tools).forEach((function(e){2===e.group&&(e.disabled=!1)})):Object.values(this.tools).forEach((function(e){2===e.group&&(e.selected=!1,e.disabled=!0)})),t.selected=!0}}},{key:"setToolOption",value:function(e,t){this.tools[e].subtype=t}},{key:"setSelection",value:function(e){e.mapIndex!==this.selection.mapIndex&&(ce=[],pe=[]),this.selection=e}},{key:"setOffset",value:function(e){this.offset=e}},{key:"setZoom",value:function(e,t){this.scale=e,this.offset=t}},{key:"setDrawerOpen",value:function(e){this.drawerOpen=e}},{key:"setDrawerWidth",value:function(e){this.drawerWidth=e}},{key:"setMapDescription",value:function(e){this.maps[this.selection.mapIndex].name=e.name,this.maps[this.selection.mapIndex].description=e.description}},{key:"setLevelDescription",value:function(e){var t=this.maps[this.selection.mapIndex].levels[this.selection.levelIndex];t.name=e.name,t.description=e.description}},{key:"setFeatureDescription",value:function(e){if(void 0!==this.selection.featureIndex){var t=this.maps[this.selection.mapIndex].levels[this.selection.levelIndex].features[this.selection.featureIndex];Object.assign(t.properties,e)}}},{key:"setFeatureOrder",value:function(e,t){var n=this.maps[this.selection.mapIndex].levels[this.selection.levelIndex],o=n.features.splice(e,1),r=Object(c.a)(o,1)[0];n.features.splice(t,0,r)}},{key:"reset",value:function(){Object.assign(this,new e)}}]),e}(),Object(ie.a)(ae.prototype,"save",[C],Object.getOwnPropertyDescriptor(ae.prototype,"save"),ae.prototype),Object(ie.a)(ae.prototype,"undo",[_],Object.getOwnPropertyDescriptor(ae.prototype,"undo"),ae.prototype),Object(ie.a)(ae.prototype,"redo",[P],Object.getOwnPropertyDescriptor(ae.prototype,"redo"),ae.prototype),Object(ie.a)(ae.prototype,"toggleWelcome",[N],Object.getOwnPropertyDescriptor(ae.prototype,"toggleWelcome"),ae.prototype),Object(ie.a)(ae.prototype,"newMap",[L],Object.getOwnPropertyDescriptor(ae.prototype,"newMap"),ae.prototype),Object(ie.a)(ae.prototype,"addLevel",[F],Object.getOwnPropertyDescriptor(ae.prototype,"addLevel"),ae.prototype),Object(ie.a)(ae.prototype,"selectLevel",[z],Object.getOwnPropertyDescriptor(ae.prototype,"selectLevel"),ae.prototype),Object(ie.a)(ae.prototype,"removeLevel",[X],Object.getOwnPropertyDescriptor(ae.prototype,"removeLevel"),ae.prototype),Object(ie.a)(ae.prototype,"setDebug",[W],Object.getOwnPropertyDescriptor(ae.prototype,"setDebug"),ae.prototype),Object(ie.a)(ae.prototype,"setGridSteps",[K],Object.getOwnPropertyDescriptor(ae.prototype,"setGridSteps"),ae.prototype),Object(ie.a)(ae.prototype,"handleDrag",[H],Object.getOwnPropertyDescriptor(ae.prototype,"handleDrag"),ae.prototype),Object(ie.a)(ae.prototype,"handlePolygon",[A],Object.getOwnPropertyDescriptor(ae.prototype,"handlePolygon"),ae.prototype),Object(ie.a)(ae.prototype,"handleBrush",[U],Object.getOwnPropertyDescriptor(ae.prototype,"handleBrush"),ae.prototype),Object(ie.a)(ae.prototype,"handleDelete",[B],Object.getOwnPropertyDescriptor(ae.prototype,"handleDelete"),ae.prototype),Object(ie.a)(ae.prototype,"addDoor",[G],Object.getOwnPropertyDescriptor(ae.prototype,"addDoor"),ae.prototype),Object(ie.a)(ae.prototype,"handleGroup",[q],Object.getOwnPropertyDescriptor(ae.prototype,"handleGroup"),ae.prototype),Object(ie.a)(ae.prototype,"setSelectedTool",[Y],Object.getOwnPropertyDescriptor(ae.prototype,"setSelectedTool"),ae.prototype),Object(ie.a)(ae.prototype,"setToolOption",[J],Object.getOwnPropertyDescriptor(ae.prototype,"setToolOption"),ae.prototype),Object(ie.a)(ae.prototype,"setSelection",[R],Object.getOwnPropertyDescriptor(ae.prototype,"setSelection"),ae.prototype),Object(ie.a)(ae.prototype,"setOffset",[Q],Object.getOwnPropertyDescriptor(ae.prototype,"setOffset"),ae.prototype),Object(ie.a)(ae.prototype,"setZoom",[Z],Object.getOwnPropertyDescriptor(ae.prototype,"setZoom"),ae.prototype),Object(ie.a)(ae.prototype,"setDrawerOpen",[V],Object.getOwnPropertyDescriptor(ae.prototype,"setDrawerOpen"),ae.prototype),Object(ie.a)(ae.prototype,"setDrawerWidth",[$],Object.getOwnPropertyDescriptor(ae.prototype,"setDrawerWidth"),ae.prototype),Object(ie.a)(ae.prototype,"setMapDescription",[ee],Object.getOwnPropertyDescriptor(ae.prototype,"setMapDescription"),ae.prototype),Object(ie.a)(ae.prototype,"setLevelDescription",[te],Object.getOwnPropertyDescriptor(ae.prototype,"setLevelDescription"),ae.prototype),Object(ie.a)(ae.prototype,"setFeatureDescription",[ne],Object.getOwnPropertyDescriptor(ae.prototype,"setFeatureDescription"),ae.prototype),Object(ie.a)(ae.prototype,"setFeatureOrder",[oe],Object.getOwnPropertyDescriptor(ae.prototype,"setFeatureOrder"),ae.prototype),Object(ie.a)(ae.prototype,"reset",[re],Object.getOwnPropertyDescriptor(ae.prototype,"reset"),ae.prototype),ae),he=r.a.createContext(new ue),me=n(11),fe=n(22),ve=n.n(fe),ye=n(6),ge=n(100),be=n(103);function xe(e){var t=Object(o.useContext)(he),n=function(n){return function(){var o=e.renderer;if(o){var r=t.scale,a=t.offset,i=O(r*n,.2,4),s=[o.canvas.width/2,o.canvas.height/2],l=o.canvasToWorld(s),c=[s[0]/i-a[0],s[1]/i-a[1]],p=[a[0]-(l[0]-c[0]),a[1]-(l[1]-c[1])];window.requestAnimationFrame((function(){t.setZoom(i,p)}))}}};return r.a.createElement("div",{className:ve()(ge.toolbar,be.zoom),style:{position:"absolute",top:"50px",right:"50px"}},r.a.createElement("button",{onClick:n(1.1)},r.a.createElement(me.a,{icon:ye.j})),r.a.createElement("button",{onClick:n(.9)},r.a.createElement(me.a,{icon:ye.h})))}var we=["#2f557466","#2f5574","#2f557466","#2f5574","#668dad66","#668dad"],Oe=function(){function e(t,n,o){var r=this;Object(m.a)(this,e),this.mouse=void 0,this.mouseDown=!1,this.drag=void 0,this.specialKeys={shift:!1,alt:!1,ctrl:!1,space:!1},this.points=[],this.polygonToolSelected=!1,this.hover=void 0,this.size=30,this.fps=0,this.requestID=void 0,this.appState=new ue,this.canvas=void 0,this.ctx=void 0,this.bufferCanvas=void 0,this.bufferCtx=void 0,this.textures={},this.dirty=new Date,this.mode=void 0,this.level=void 0,this.onMouseDown=function(e){r.dirty=new Date,r.mouseDown=!0;var t=r.mouse;if(!(e instanceof MouseEvent&&2===e.button))if(t&&(r.drag={start:r.canvasToTile(t),end:r.canvasToTile(t)}),r.appState.tools.pointer.selected){var n,o,a,i,s=r.appState.selection.featureIndex,l=null===(n=r.hover)||void 0===n?void 0:n.featureIndex,c=null===(o=r.hover)||void 0===o?void 0:o.geometryIndex;if(e.shiftKey&&void 0!==s&&void 0!==l&&void 0!==c)r.appState.handleGroup(l,c);else r.appState.setSelection(Object(h.a)(Object(h.a)({},r.appState.selection),{},{featureIndex:null===(a=r.hover)||void 0===a?void 0:a.featureIndex,geometryIndex:null===(i=r.hover)||void 0===i?void 0:i.geometryIndex}))}else if(r.appState.tools.doors.selected&&t){var p=D(r.worldToTile(r.canvasToWorld(t),!1),r.appState.maps[r.appState.selection.mapIndex].levels[r.appState.selection.levelIndex].features,e.shiftKey);p&&r.appState.addDoor(p)}},this.onMouseUp=function(){if(r.dirty=new Date,r.mouseDown=!1,r.mouse&&r.appState.tools.polygon.selected){var e=r.canvasToTile(r.mouse);r.points.length>=1&&b(r.points[0],e)<1?(r.appState.handlePolygon(r.points),r.points=[]):r.points.push(e)}else if(r.appState.tools.brush.selected)r.appState.handleBrush(r.points),r.points=[],r.drag=void 0;else if(r.drag){var t=[r.drag.start,r.drag.end],n=t[0],o=t[1];if(r.appState.tools.rect.selected||r.appState.tools.ellipse.selected){var a=S([n,o]);n=a.sw,o=a.ne}r.appState.handleDrag(n,o),r.drag=void 0,r.points=[]}},this.onMouseMove=function(e){if(r.dirty=new Date,"touches"in e&&e.target){var t=e.target.getBoundingClientRect();r.mouse=[e.touches[0].clientX-t.left,e.touches[0].clientY-t.top]}else"offsetX"in e&&(r.mouse=[e.offsetX,e.offsetY]);if(r.mouse&&r.mouseDown&&r.drag)if(r.specialKeys.space){var n=r.canvasToWorld(r.mouse),o=[r.drag.start[0]*r.size-n[0],r.drag.start[1]*r.size-n[1]],a=r.appState.offset;a[0]-=o[0],a[1]-=o[1],r.drag.start=r.canvasToTile(r.mouse),r.drag.end=r.canvasToTile(r.mouse),window.requestAnimationFrame((function(){r.appState.setOffset(a)}))}else r.drag.end=r.canvasToTile(r.mouse),r.appState.tools.brush.selected&&r.points.push(r.worldToTile(r.canvasToWorld(r.mouse),!1))},this.onWheel=function(e){if(void 0!==e.x&&void 0!==e.y&&document.elementFromPoint(e.x,e.y)===r.canvas){e.stopPropagation(),e.preventDefault(),r.dirty=new Date;var t=r.mouse,n=r.appState,o=n.scale,a=n.offset;t&&(a[0]-=e.deltaX*o,a[1]-=e.deltaY*o,window.requestAnimationFrame((function(){r.appState.setOffset(a)})))}},this.onKeyDown=function(e){if(r.dirty=new Date,"Shift"===e.key&&(r.specialKeys.shift=!0),"Control"===e.key&&(r.specialKeys.ctrl=!0),"Alt"===e.key&&(r.specialKeys.alt=!0),document.activeElement===document.body){var t=r.appState;"Backspace"!==e.key&&"Delete"!==e.key||t.handleDelete(),"z"===e.key&&r.specialKeys.ctrl&&t.undo(),"y"===e.key&&r.specialKeys.ctrl&&t.redo()," "===e.key&&(r.canvas.style.cursor="pointer",r.specialKeys.space=!0,e.preventDefault())}},this.onKeyUp=function(e){r.dirty=new Date,"Shift"===e.key&&(r.specialKeys.shift=!1),"Control"===e.key&&(r.specialKeys.ctrl=!1),"Alt"===e.key&&(r.specialKeys.alt=!1)," "===e.key&&(r.canvas.style.cursor="auto",r.specialKeys.space=!1)},this.canvasToWorld=function(e){var t=r.appState,n=t.offset,o=t.scale;return[e[0]/o-n[0],e[1]/o-n[1]]},this.worldToCanvas=function(e){var t=r.appState,n=t.offset,o=t.scale;return[(e[0]+n[0])*o,(e[1]+n[1])*o]},this.worldToTile=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){var n=r.size/r.appState.gridSteps;return[Math.round(e[0]/n)/r.appState.gridSteps,Math.round(e[1]/n)/r.appState.gridSteps]}return[e[0]/r.size,e[1]/r.size]},this.canvasToTile=function(e){return r.worldToTile(r.canvasToWorld(e))},this.render=function(e){if((new Date).getTime()-r.dirty.getTime()<5e3){var t=performance.now(),n=r.ctx,o=r.appState,a=o.tools;r.polygonToolSelected&&!o.tools.polygon.selected&&(r.points=[]),r.polygonToolSelected=o.tools.polygon.selected,n.resetTransform(),r.bufferCtx.resetTransform(),r.clearScreen();var i=r.appState.maps[r.appState.selection.mapIndex],s=void 0!==r.level?i.levels[r.level]:i.levels[r.appState.selection.levelIndex];r.drawLevel(s,"edit"===r.mode),"edit"===r.mode&&(n.globalAlpha=.2,Object.entries(r.appState.selection.ghostLevels).forEach((function(e){var t=Object(c.a)(e,2),n=t[0];t[1]&&r.drawLevel(i.levels[parseInt(n)],!1)})),n.globalAlpha=1),"edit"===r.mode&&(n.save(),n.scale(o.scale,o.scale),n.translate(o.offset[0],o.offset[1]),n.scale(r.size,r.size),r.mouse&&r.drawMousePos(r.mouse),r.points.length>0&&a.polygon.selected?r.drawPolygon(r.points,"#2f557466","#2f5574"):r.points.length>0&&a.brush.selected?r.drawBrush(r.points,"#2f557466","#2f5574"):r.drag&&r.drawDrag()),n.restore();var l=performance.now()-t;r.fps=.1*l+.9*r.fps,o.debug&&r.renderFPS(e)}r.requestID=requestAnimationFrame(r.render)};var a=t.getContext("2d",{alpha:!0});if(null===a)throw new Error("canvas has null rendering context");this.canvas=t,this.ctx=a,this.requestID=requestAnimationFrame(this.render),this.bufferCanvas=document.createElement("canvas"),this.bufferCanvas.width=this.canvas.width,this.bufferCanvas.height=this.canvas.height;var i=this.bufferCanvas.getContext("2d",{alpha:!0});if(null===i)throw new Error("canvas has null rendering context");this.bufferCtx=i,this.mode=n,this.level=o}return Object(f.a)(e,[{key:"attachListeners",value:function(){"print"!==this.mode&&(this.canvas.addEventListener("touchstart",this.onMouseDown),this.canvas.addEventListener("mousedown",this.onMouseDown),this.canvas.addEventListener("mouseup",this.onMouseUp),this.canvas.addEventListener("touchend",this.onMouseUp),this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("touchmove",this.onMouseMove),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),window.addEventListener("wheel",this.onWheel,{passive:!1}))}},{key:"detachListeners",value:function(){"print"!==this.mode&&(this.canvas.removeEventListener("mousedown",this.onMouseDown),this.canvas.removeEventListener("mouseup",this.onMouseUp),this.canvas.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("wheel",this.onWheel))}},{key:"loadTextures",value:function(e){var t=this,n=document.createElement("canvas");n.width=1024,n.height=1024;var o=n.getContext("2d",{alpha:!0});if(null===o)throw new Error("unable to create pattern");e.forEach((function(e){var r=document.createElement("img");r.width=100,r.height=100,r.onload=function(){o.drawImage(r,0,0);var a=t.ctx.createPattern(n,"repeat");if(null===a)throw new Error("unable to create pattern");var i=new DOMMatrix;a.setTransform(i.scale(.005)),t.textures[e]=a},r.src="".concat("/mapmaker","/textures/").concat(e)}))}},{key:"zoomToCenter",value:function(e,t,n){this.ctx.scale(n,n),this.ctx.translate((e[0]-t[0]*n)/n,(e[1]-t[1]*n)/n)}},{key:"renderTextCenter",value:function(e,t){this.ctx.font=t;var n=this.ctx.measureText(e),o=n.actualBoundingBoxAscent+n.actualBoundingBoxDescent;this.ctx.fillText(e,-n.width/2,o)}},{key:"renderFPS",value:function(e){var t=this.fps.toFixed(0);this.ctx.save(),this.ctx.translate(this.canvas.width-48,12),this.ctx.fillStyle="#000",this.renderTextCenter(t,"18px Roboto Mono, monospace"),this.ctx.restore()}},{key:"clearScreen",value:function(){var e=this.canvas,t=this.ctx,n=this.bufferCanvas;"edit"===this.mode?(t.fillStyle="#D9D2BF",t.fillRect(0,0,e.width,e.height)):t.clearRect(0,0,e.width,e.height),n.width===e.width&&n.height===e.height||(n.width=e.width,n.height=e.height)}},{key:"drawGrid",value:function(){var e=this.canvas,t=this.ctx,n=t.getTransform().inverse(),o=n.transformPoint({x:0,y:0}),r=n.transformPoint({x:e.width,y:e.height});t.lineWidth=.01,t.strokeStyle="#000";for(var a=Math.floor(o.x);a<=r.x;a++)t.beginPath(),t.moveTo(a,o.y),t.lineTo(a,r.y),t.stroke();for(var i=Math.floor(o.y);i<=r.y;i++)t.beginPath(),t.moveTo(o.x,i),t.lineTo(r.x,i),t.stroke();if(1!==this.appState.gridSteps&&"edit"===this.mode){t.lineWidth=.005,t.strokeStyle="#666666";for(var s=Math.floor(o.x);s<=r.x;s+=1/this.appState.gridSteps)t.beginPath(),t.moveTo(s,o.y),t.lineTo(s,r.y),t.stroke();for(var l=Math.floor(o.y);l<=r.y;l+=1/this.appState.gridSteps)t.beginPath(),t.moveTo(o.x,l),t.lineTo(r.x,l),t.stroke()}}},{key:"drawMousePos",value:function(e){var t=this.ctx;t.save();var n=this.worldToTile(this.canvasToWorld(e),!0);if(t.fillStyle="#000",t.beginPath(),t.arc(n[0],n[1],.1,0,2*Math.PI),t.fill(),this.appState.debug){var o="0.5px Roboto, sans-serif";t.translate(n[0],n[1]-1),this.renderTextCenter("Mouse: ".concat(e[0].toFixed(0),",").concat(e[1].toFixed(0)),o),t.translate(0,-.5),this.renderTextCenter("Tile: ".concat(n[0].toFixed(0),",").concat(n[1].toFixed(0)),o)}t.restore()}},{key:"drawDrag",value:function(){var e=this.drag,t=this.appState;if(e){var n=e.start,o=e.end;if(b(n,o)>1&&t.tools.rect.selected)this.drawGeometry({type:"polygon",coordinates:[n,[n[0],o[1]],o,[o[0],n[1]]]},"#2f557466","#2f5574");else if(b(n,o)>1&&t.tools.stairs.selected)this.drawStairs([n,o],"#2f557466","#2f5574");else if(b(n,o)>1&&t.tools.decoration.selected)this.drawDecoration(t.tools.decoration.subtype,[n,o],"#2f557466","#2f5574");else if(b(n,o)>1&&t.tools.ellipse.selected){var r=S([n,o]);this.drawEllipse([r.sw,r.ne],"#2f557466","#2f5574")}else this.drawLine([n,o],.1,"#2f5574")}}},{key:"drawGeometry",value:function(e,t,n,o){"polygon"===e.type?this.drawPolygon(e.coordinates,t||o,n||o):"ellipse"===e.type?this.drawEllipse(e.coordinates,t||o,n||o):"line"===e.type?this.drawLine(e.coordinates,void 0!==o?.5:.1,n||o):"brush"===e.type?this.drawBrush(e.coordinates,t||o,n||o):"door"===e.type?this.drawDoor(e.subtype,e.coordinates,n||o):"stairs"===e.type?this.drawStairs(e.coordinates,o,n||o):"decoration"===e.type&&this.drawDecoration(e.subtype,e.coordinates,o,n||o)}},{key:"drawPolygon",value:function(e,t,n){var o=this.ctx;if(this.pathPoints(e,!0),t&&(o.fillStyle=t,o.fill()),n&&(o.strokeStyle=n,o.lineWidth=.1,(n instanceof CanvasGradient||n instanceof CanvasPattern)&&(o.lineWidth=2),o.stroke()),t&&"string"===typeof t&&we.includes(t)){this.drawPoints(e);var r=S(e);o.fillStyle="#000",o.save(),o.translate(r.sw[0]+r.w/2,r.ne[1]-1),this.renderTextCenter("".concat(5*r.w,"ft x ").concat(5*r.h,"ft"),"1px Roboto, sans-serif"),o.restore()}}},{key:"drawEllipse",value:function(e,t,n){var o=this.ctx;if(this.pathEllipse(e,!0),t&&(o.fillStyle=t,o.fill()),n&&(o.strokeStyle=n,o.lineWidth=.1,o.stroke()),t&&"string"===typeof t&&we.includes(t)){var r=S(e);this.drawPoints([r.sw,[r.sw[0],r.ne[1]],r.ne,[r.ne[0],r.sw[1]]]),o.fillStyle="#000",o.save(),o.translate(r.sw[0]+r.w/2,r.ne[1]-1),this.renderTextCenter("".concat(5*r.w,"ft x ").concat(5*r.h,"ft"),"1px Roboto, sans-serif"),o.restore()}}},{key:"drawLine",value:function(e,t,n){var o=this.ctx;this.pathPoints(e),n&&(o.strokeStyle=n,o.lineWidth=t,o.stroke())}},{key:"drawBrush",value:function(e,t,n){var o=this.ctx;this.pathPoints(e),t&&(o.strokeStyle=t,o.lineJoin="round",o.lineCap="round",o.lineWidth=.9,o.stroke()),this.ctx.globalCompositeOperation="destination-over",n&&(o.strokeStyle=n,o.lineJoin="round",o.lineCap="round",o.lineWidth=1.1,o.stroke()),this.ctx.globalCompositeOperation="source-over",t&&"string"===typeof t&&we.includes(t)&&this.drawPoints(e,.1)}},{key:"drawDoor",value:function(e,t,n){switch(e){case"normal":this.drawNormalDoor(t,n);break;case"secret":this.drawSecretDoor(t,n);break;default:throw new Error("unsupported door type ".concat(e))}}},{key:"drawNormalDoor",value:function(e,t){var n=this.ctx,o=Object(c.a)(e,2),r=o[0],a=o[1],i=w(.1,r,a),s=w(.9,r,a);t&&(n.strokeStyle=t,n.lineCap="butt",n.lineWidth=.1,n.beginPath(),n.moveTo(r[0],r[1]),n.lineTo(a[0],a[1]),n.stroke(),n.lineWidth=.3,n.beginPath(),n.moveTo(i[0],i[1]),n.lineTo(s[0],s[1]),n.stroke())}},{key:"drawSecretDoor",value:function(e,t){var n=this.ctx,o=Object(c.a)(e,2),r=o[0],a=o[1];if(t){var i=Math.max(Math.abs(r[0]-a[0]),Math.abs(r[1]-a[1]));n.font="".concat(i,"px Helvetica");var s=this.ctx.measureText("S"),l=s.actualBoundingBoxAscent+s.actualBoundingBoxDescent,p=(s.actualBoundingBoxLeft-s.actualBoundingBoxRight)/2,d=l/2;n.save(),n.fillStyle=t,n.fillText("S",r[0]+(a[0]-r[0])/2+p,r[1]+(a[1]-r[1])/2+d),n.restore()}}},{key:"drawStairs",value:function(e,t,n){if(n){var o=this.ctx,r=Object(c.a)(e,2),a=r[0],i=r[1],s=Math.abs(i[0]-a[0]),l=Math.abs(i[1]-a[1]),p=Math.sign(i[0]-a[0]),d=Math.sign(i[1]-a[1]),u=Math.max(s,l),h=Math.min(s,l);o.strokeStyle=n,o.lineWidth=.1,o.lineCap="butt";for(var m=0;m<u;m+=.5){var f=x(m/(u+.5),.1,h);o.beginPath(),s>l?(o.moveTo(a[0]+m*p,Math.min(a[1],i[1])+(h-f)/2),o.lineTo(a[0]+m*p,Math.min(a[1],i[1])+(h-f)/2+f)):(o.moveTo(Math.min(a[0],i[0])+(h-f)/2,a[1]+m*d),o.lineTo(Math.min(a[0],i[0])+(h-f)/2+f,a[1]+m*d)),o.stroke()}o.lineWidth=.05,o.beginPath(),s>l?(o.moveTo(a[0],a[1]),o.lineTo(i[0],a[1]),o.lineTo(i[0],i[1]),o.lineTo(a[0],i[1])):(o.moveTo(a[0],a[1]),o.lineTo(a[0],i[1]),o.lineTo(i[0],i[1]),o.lineTo(i[0],a[1])),o.stroke(),t&&(o.closePath(),o.fillStyle=t,o.fill()),n&&"string"===typeof n&&we.includes(n)&&this.drawPoints(e)}}},{key:"drawDecoration",value:function(e,t,n,o){switch(e){case"statue":this.drawStatue(t,n,o);break;case"column":this.drawColumn(t,n);break;case"stalacmite":this.drawStalacmite(t,n,o);break;default:throw new Error("unsupported decoration type ".concat(e))}}},{key:"drawStatue",value:function(e,t,n){if(n){var o=this.ctx,r=Object(c.a)(e,2),a=r[0],i=r[1],s=Math.max(Math.abs(i[0]-a[0]),Math.abs(i[1]-a[1]))/2,l=a[0]+s,p=a[1]+s;o.strokeStyle=n,o.lineWidth=.05,o.beginPath(),o.ellipse(l,p,s,s,0,0,2*Math.PI),o.stroke(),t&&(o.closePath(),o.fillStyle=t,o.fill());var d=.4*s;o.beginPath();for(var u=-.1*Math.PI,h=0;h<10;h++)0===h?o.moveTo(l+s*Math.cos(u),p+s*Math.sin(u)):o.lineTo(l+s*Math.cos(u),p+s*Math.sin(u)),u+=.2*Math.PI,o.lineTo(l+d*Math.cos(u),p+d*Math.sin(u)),u+=.2*Math.PI;o.closePath(),o.fillStyle=n,o.fill(),n&&"string"===typeof n&&we.includes(n)&&this.drawPoints(e)}}},{key:"drawColumn",value:function(e,t){if(t){var n=this.ctx,o=Object(c.a)(e,2),r=o[0],a=o[1],i=Math.max(Math.abs(a[0]-r[0]),Math.abs(a[1]-r[1]))/2,s=r[0]+i,l=r[1]+i;n.fillStyle=t,n.lineWidth=.05,n.beginPath(),n.ellipse(s,l,i,i,0,0,2*Math.PI),n.fill(),t&&"string"===typeof t&&we.includes(t)&&this.drawPoints(e)}}},{key:"drawStalacmite",value:function(e,t,n){if(n){var o=this.ctx,r=Object(c.a)(e,2),a=r[0],i=r[1],s=y()("(".concat(a[0],",").concat(a[1],"),(").concat(i[0],",").concat(i[1],")")),l=Math.max(Math.abs(i[0]-a[0]),Math.abs(i[1]-a[1]))/2,p=a[0]+l,d=a[1]+l;o.strokeStyle=n,o.lineWidth=.1,o.beginPath();for(var u=l*Math.max(.5,s()),h=-.1*Math.PI,m=0;m<20&&(0===m?o.moveTo(p+u*Math.cos(h),d+u*Math.sin(h)):o.lineTo(p+u*Math.cos(h),d+u*Math.sin(h)),!((h+=.2*s()*Math.PI)+.1*Math.PI>=2*Math.PI));m++)s()<.5?u+=.3*s():u-=.3*s(),u=Math.max(0,Math.min(l,u));o.closePath(),o.stroke(),t&&(o.fillStyle=t,o.fill()),n&&"string"===typeof n&&we.includes(n)&&this.drawPoints(e)}}},{key:"drawPoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25,n=this.ctx;n.fillStyle="#fff238",n.strokeStyle="black",n.lineWidth=.05;for(var o=0;o<e.length;o++)n.beginPath(),n.ellipse(e[o][0],e[o][1],t,t,0,0,2*Math.PI),n.fill(),n.stroke()}},{key:"pathPoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.ctx;n.beginPath(),n.moveTo(e[0][0],e[0][1]);for(var o=0;o<e.length;o++)n.lineTo(e[o][0],e[o][1]);t&&n.closePath()}},{key:"pathEllipse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.ctx,o=Object(c.a)(e,2),r=o[0],a=o[1];n.beginPath(),n.ellipse(r[0]+(a[0]-r[0])/2,r[1]+(a[1]-r[1])/2,Math.abs((a[0]-r[0])/2),Math.abs((r[1]-a[1])/2),0,0,2*Math.PI),t&&n.closePath()}},{key:"drawFeatures",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=["room","other","text"],r=["polygon","ellipse","line","brush","door","stairs","decoration"];o.forEach((function(o){r.forEach((function(r){e.features.forEach((function(e,a){e.properties.type===o&&e.geometries.forEach((function(e,o){if(e.type===r&&e.coordinates&&0!==e.coordinates.length)if(n)t.drawGeometry(e,void 0,void 0,E(a,o));else{var i="#F1ECE0";"polygon"!==e.type||k(e.coordinates)||(i="#D9D2BF"),t.drawGeometry(e,i,"#000")}}))}))}))})),n||e.features.filter((function(e){return e.properties.name})).forEach((function(e,n){var o=T(e);o&&(t.ctx.save(),t.ctx.translate(o[0],o[1]-.25),t.ctx.fillStyle="#000",t.renderTextCenter("".concat(n+1),"0.5px Helvetica"),t.ctx.restore())}))}},{key:"drawLevel",value:function(e,t){var n,o,r=this,a=this.appState,i=this.canvas,s=i.width,l=i.height,p=this.ctx;if(this.ctx=this.bufferCtx,t){if(this.ctx.resetTransform(),this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,s,l),this.ctx.save(),this.ctx.scale(a.scale,a.scale),this.ctx.translate(a.offset[0],a.offset[1]),this.ctx.scale(this.size,this.size),this.drawFeatures(e,!0),this.mouse){var d=this.ctx.getImageData(this.mouse[0],this.mouse[1],1,1).data,h=(n=d[0],o=d[1],d[2],[n,o]),m=Object(c.a)(h,2),f=m[0],v=m[1];f===1/0||f>=e.features.length||v>=e.features[f].geometries.length?this.hover=void 0:this.hover={featureIndex:f,geometryIndex:v}}this.ctx.restore()}if(this.ctx.resetTransform(),this.ctx.clearRect(0,0,s,l),this.ctx.save(),"edit"===this.mode)this.ctx.scale(a.scale,a.scale),this.ctx.translate(a.offset[0],a.offset[1]),this.ctx.scale(this.size,this.size);else{var y=e.features.reduce((function(e,t){var n=Object(c.a)(e,2),o=n[0],r=n[1];return t.geometries.reduce((function(e,t){var n=Object(c.a)(e,2),o=n[0],r=n[1],a=Math.min.apply(Math,Object(u.a)(t.coordinates.map((function(e){return e[0]})))),i=Math.max.apply(Math,Object(u.a)(t.coordinates.map((function(e){return e[0]})))),s=Math.min.apply(Math,Object(u.a)(t.coordinates.map((function(e){return e[1]})))),l=Math.max.apply(Math,Object(u.a)(t.coordinates.map((function(e){return e[1]}))));return[[Math.min(o[0],a),Math.max(o[1],l)],[Math.max(r[0],i),Math.min(r[1],s)]]}),[o,r])}),[[1/0,-1/0],[-1/0,1/0]]),g=y[1][0]-y[0][0],x=y[0][1]-y[1][1],w=Math.max(g,x),O=Math.max(this.canvas.width-20,this.canvas.height-20)/w,E=[y[0][0]+g/2,y[1][1]+x/2];this.zoomToCenter([this.canvas.width/2,this.canvas.height/2],[E[0],E[1]],O)}if(this.drawFeatures(e),t&&a.tools.pointer.selected){if(void 0!==this.hover&&void 0!==this.hover.featureIndex){var S=e.features[this.hover.featureIndex];void 0!==this.hover.geometryIndex&&void 0!==S&&this.drawGeometry(S.geometries[this.hover.geometryIndex],"#668dad66","#668dad")}var k=this.appState.getSelectedFeature();if(k&&(k.feature.geometries.forEach((function(e){r.drawGeometry(e,e===k.geometry?"#2f557466":"#668dad66",e===k.geometry?"#2f5574":"#668dad66")})),this.drag&&b(this.drag.start,this.drag.end))){this.ctx.save();var j=[this.drag.end[0]-this.drag.start[0],this.drag.end[1]-this.drag.start[1]];this.ctx.translate(j[0],j[1]),k.feature.geometries.forEach((function(e){r.drawGeometry(e,"#2f557466","#2f5574")})),this.ctx.restore()}}if(this.ctx.globalCompositeOperation="source-over",a.tools.doors.selected&&this.mouse){var I=D(this.worldToTile(this.canvasToWorld(this.mouse),!1),e.features,this.specialKeys.shift);I&&this.drawDoor(a.tools.doors.subtype,[I.from,I.to],"#000")}"edit"===this.mode?this.ctx.globalCompositeOperation="source-over":this.ctx.globalCompositeOperation="source-atop",this.drawGrid(),this.ctx.restore(),p.drawImage(this.bufferCanvas,0,0),this.ctx=p}}]),e}();function Ee(e){var t=Object(o.useRef)(null),n=Object(o.useContext)(he),a=Object(o.useState)(),i=Object(c.a)(a,2),s=i[0],l=i[1];return Object(o.useEffect)((function(){if(null!==t.current){var o=t.current,r=new Oe(o,e.mode,e.level),a=function(){var e,t;o.width=(null===(e=o.parentElement)||void 0===e?void 0:e.offsetWidth)||o.width,o.height=(null===(t=o.parentElement)||void 0===t?void 0:t.offsetHeight)||o.height,r.dirty=new Date};return a(),r.attachListeners(),window.addEventListener("resize",a),r.appState=n,r.mode=e.mode,n.notifyChange=function(){r.dirty=new Date},l(r),function(){window.removeEventListener("resize",a),r.detachListeners()}}}),[t,n,e.mode,e.level]),r.a.createElement("div",{style:{height:"100%",width:"100%"}},r.a.createElement("canvas",{ref:t,style:{height:"100%",width:"100%"}}),"edit"===e.mode&&r.a.createElement(xe,{renderer:s}))}var Se=n(34),ke=n(35),je=n.n(ke),Ie=n(105);function Me(e){return r.a.createElement("div",{className:Ie.formattedText},r.a.createElement("h1",null,e.name),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object(Se.sanitize)(je()(e.text||""))}}))}var De=n(107);function Te(e){return r.a.createElement("div",{className:De.editor},r.a.createElement("div",{style:{display:"flex",alignContent:"center"}},r.a.createElement("input",{className:ge.input,style:{flexGrow:1},value:e.name||"",onChange:function(t){e.onNameChange(t.target.value)}})),r.a.createElement("textarea",{value:e.description||"",onChange:function(t){e.onDescriptionChange(t.target.value)}}),r.a.createElement("div",{className:De.actions},r.a.createElement("button",{className:ge.button,onClick:e.onSave},"Save"),r.a.createElement("button",{className:ve()(ge.button),onClick:e.onUndo},"Undo"),e.onDelete&&r.a.createElement("button",{className:ve()(ge.button,ge.danger),onClick:e.onDelete},"Delete")),r.a.createElement(Me,{name:e.name,text:e.description}))}function Ce(){var e=Object(o.useContext)(he),t=e.getSelectedFeature(),n=Object(o.useState)(e.selection),a=Object(c.a)(n,2),i=a[0],s=a[1],l=Object(o.useState)(void 0),p=Object(c.a)(l,2),d=p[0],u=p[1],h=Object(o.useState)(void 0),m=Object(c.a)(h,2),f=m[0],v=m[1];e.selection.levelIndex===i.levelIndex&&e.selection.featureIndex===i.featureIndex||(s(e.selection),u(void 0),v(void 0));var y=d||"";void 0===d&&void 0!==(null===t||void 0===t?void 0:t.feature.properties.name)&&(y=null===t||void 0===t?void 0:t.feature.properties.name);var g=f||"";return void 0===f&&void 0!==(null===t||void 0===t?void 0:t.feature.properties.description)&&(g=null===t||void 0===t?void 0:t.feature.properties.description),r.a.createElement("div",null,r.a.createElement("h3",{style:{color:"white"}},"Area"),r.a.createElement(Te,{name:y,description:g,onNameChange:u,onDescriptionChange:v,onSave:function(){e.setFeatureDescription({name:void 0===d?null===t||void 0===t?void 0:t.feature.properties.name:d,description:void 0===f?null===t||void 0===t?void 0:t.feature.properties.description:f}),u(void 0),v(void 0)},onUndo:function(){t&&(t.feature.properties.name&&u(t.feature.properties.name),t.feature.properties.description&&v(t.feature.properties.description))},onDelete:function(){e.handleDelete()}}))}var _e=n(50),Pe=n(109);function Ne(){var e=Object(o.useContext)(he),t=e.maps[e.selection.mapIndex].levels[e.selection.levelIndex],n=Object(o.useState)(e.selection),a=Object(c.a)(n,2),i=a[0],s=a[1],l=Object(o.useState)(void 0),p=Object(c.a)(l,2),d=p[0],u=p[1],m=Object(o.useState)(void 0),f=Object(c.a)(m,2),v=f[0],y=f[1];e.selection.mapIndex!==i.mapIndex&&(s(e.selection),u(void 0),y(void 0));var g=t.features.map((function(e,t){return{index:t,feature:e}})).filter((function(e){return e.feature.properties.name})),b=function(t){return function(){e.setSelection(Object(h.a)(Object(h.a)({},e.selection),{},{featureIndex:t,geometryIndex:0}))}},x=d||"";void 0===d&&(x=t.name||"");var w=v||"";return void 0===v&&(w=t.description||""),r.a.createElement("div",null,r.a.createElement("h3",{style:{color:"white"}},"Level"),r.a.createElement(Te,{name:x,description:w,onNameChange:u,onDescriptionChange:y,onSave:function(){e.setLevelDescription({name:void 0===d?t.name:d,description:void 0===v?t.description:v}),u(void 0),y(void 0)},onUndo:function(){u(t.name),y(t.description)}}),r.a.createElement("div",{className:Pe.features},r.a.createElement(_e.a,{onDragEnd:function(t){t.destination&&e.setFeatureOrder(g[t.source.index].index,g[t.destination.index].index)}},r.a.createElement(_e.c,{droppableId:"droppable"},(function(t,n){return r.a.createElement("div",Object.assign({},t.droppableProps,{ref:t.innerRef,style:(n.isDraggingOver,{background:"#373737",padding:"4px",width:"250px"})}),g.map((function(t,n){return r.a.createElement(_e.b,{key:n,draggableId:n.toString(),index:n},(function(o,a){var i,s,l;return r.a.createElement("div",Object.assign({ref:o.innerRef},o.draggableProps,o.dragHandleProps,{onClick:b(t.index),style:(a.isDragging,s=(null===(i=e.getSelectedFeature())||void 0===i?void 0:i.feature)===t.feature,l=o.draggableProps.style||{},Object(h.a)({userSelect:"none",padding:"4px",margin:"0",background:"#373737",textDecoration:s?"underline":""},l))}),"".concat(n+1,". ").concat(t.feature.properties.name))}))})),t.placeholder)})))))}function Le(){var e=Object(o.useContext)(he),t=e.maps[e.selection.mapIndex],n=Object(o.useState)(e.selection),a=Object(c.a)(n,2),i=a[0],s=a[1],l=Object(o.useState)(void 0),p=Object(c.a)(l,2),d=p[0],u=p[1],h=Object(o.useState)(void 0),m=Object(c.a)(h,2),f=m[0],v=m[1];e.selection.mapIndex!==i.mapIndex&&(s(e.selection),u(void 0),v(void 0));var y=d||"";void 0===d&&(y=t.name||"");var g=f||"";return void 0===f&&(g=t.description||""),r.a.createElement("div",null,r.a.createElement("h3",{style:{color:"white"}},"Map"),r.a.createElement(Te,{name:y,description:g,onNameChange:u,onDescriptionChange:v,onSave:function(){e.setMapDescription({name:void 0===d?t.name:d,description:void 0===f?t.description:f}),u(void 0),v(void 0)},onUndo:function(){u(t.name),v(t.description)}}))}var Fe=n(112);function ze(){var e=Object(o.useContext)(he),t=e.getSelectedFeature(),n=Object(o.useRef)(null),a=function e(t){if(1===t.buttons){if(n.current){var o=n.current.dataset.drag;if(o){var r=parseInt(n.current.style.width.replace("px",""));n.current.style.width="".concat(r+(parseInt(o)-t.screenX),"px")}n.current.dataset.drag=t.screenX.toString()}}else document.removeEventListener("mousemove",e)};return r.a.createElement("div",{ref:n,className:ve()(Fe.drawer,e.drawerOpen&&Fe.open),style:{width:e.drawerOpen?"".concat(e.drawerWidth,"px"):0}},r.a.createElement("button",{className:ve()(Fe.toggleButton,e.drawerOpen&&Fe.open),onClick:function(){n.current&&(n.current.dataset.drag?n.current.dataset.drag="":e.setDrawerOpen(!e.drawerOpen))},onMouseDown:function(e){document.addEventListener("mousemove",a),n.current&&(n.current.dataset.dragStart=e.screenX.toString())},onMouseUp:function(t){if(document.removeEventListener("mousemove",a),n.current){var o=n.current.dataset.dragStart;o&&Math.abs(parseInt(o)-t.screenX)<10&&(n.current.dataset.drag="");var r=parseInt(n.current.style.width.replace("px",""));r>100&&(e.setDrawerWidth(r),e.setDrawerOpen(!0))}}},e.drawerOpen&&r.a.createElement(me.a,{icon:ye.c}),!e.drawerOpen&&r.a.createElement(me.a,{icon:ye.b})),r.a.createElement("div",{className:Fe.editors},r.a.createElement(Le,null),r.a.createElement(Ne,null),t&&r.a.createElement(Ce,null)))}var Xe=n(28),We=n(114);function Ke(){var e=Object(o.useContext)(he),t=function(t){return e.selection.ghostLevels[t]};return r.a.createElement("div",{className:We.levels},r.a.createElement("h4",null,"Levels"),e.maps[e.selection.mapIndex].levels.map((function(n,o){return r.a.createElement("div",{key:o,className:We.level},r.a.createElement("button",{className:ve()(We.link,e.selection.levelIndex===o&&We.selected),onClick:function(){return e.selectLevel(o)}},o),r.a.createElement("button",{onClick:function(){return e.removeLevel(o)}},r.a.createElement(me.a,{icon:ye.h})),r.a.createElement("input",{type:"checkbox",checked:t(o),onChange:function(t){return function(t,n){e.setSelection(Object(h.a)(Object(h.a)({},e.selection),{},{ghostLevels:Object(h.a)(Object(h.a)({},e.selection.ghostLevels),{},Object(Xe.a)({},t,n))}))}(o,t.target.checked)}}))})),r.a.createElement("button",{onClick:function(){return e.addLevel()}},r.a.createElement(me.a,{icon:ye.j})))}var He=n(116);function Ae(e){return r.a.createElement("div",{className:He.modal,style:{display:e.open?"block":"none"}},r.a.createElement("div",{className:He.modalContent},r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement("button",{onClick:e.toggle},r.a.createElement(me.a,{icon:ye.m}))),e.children))}var Ue=n(118);function Be(e){var t=Object(o.useContext)(he);return r.a.createElement("div",null,r.a.createElement("h2",null,"Maps"),r.a.createElement("div",null,t.maps.map((function(t,n){return r.a.createElement("div",{key:n},r.a.createElement("h4",{className:Ue.mapLink,onClick:function(){return e.onSelect(n)}},t.name))}))))}function Ge(){var e=Object(o.useContext)(he),t=Object(d.f)(),n=Object(o.useState)(void 0),a=Object(c.a)(n,2),i=a[0],s=a[1],l=void 0===i?e.maps[e.selection.mapIndex].name:i,p=Object(o.useState)(!1),u=Object(c.a)(p,2),h=u[0],m=u[1],f=Object(o.useState)(e.selection),v=Object(c.a)(f,2),y=v[0],g=v[1];return e.selection.mapIndex===y.mapIndex&&e.selection.mapIndex===y.mapIndex||(g(e.selection),s(void 0)),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ue.menubar},r.a.createElement("span",{className:Ue.title},"RPG.ai"),r.a.createElement("input",{className:ge.input,value:l,onChange:function(e){s(e.target.value)}}),r.a.createElement("button",{className:ge.buttonSmall,onClick:function(){e.save(l||"")}},"Save"),e.maps.length>1&&r.a.createElement("button",{className:ge.buttonSmall,onClick:function(){m(!0)}},"Load"),r.a.createElement("button",{className:ge.buttonSmall,onClick:function(){e.newMap()}},"New"),r.a.createElement("button",{className:ge.buttonSmall,onClick:function(){e.undo()}},"Undo"),r.a.createElement("button",{className:ge.buttonSmall,onClick:function(){e.redo()}},"Redo"),r.a.createElement("button",{className:ge.buttonSmall,onClick:function(){t.push("/print")}},"Print"),r.a.createElement("button",{className:ge.buttonSmall,onClick:function(){e.toggleWelcome()}},"Help"),e.debug&&r.a.createElement("div",null,r.a.createElement("button",{className:ge.buttonSmall,onClick:function(){e.export()}},"Export"),r.a.createElement("button",{className:ge.buttonSmall,onClick:function(){e.reset()}},"Clear")),r.a.createElement("div",{className:Ue.debugMenu},r.a.createElement("label",null,"Debug"),r.a.createElement("input",{type:"checkbox",checked:e.debug,onChange:function(t){return e.setDebug(t.target.checked)}}))),h&&r.a.createElement(Ae,{open:h,toggle:function(){return m(!h)}},r.a.createElement(Be,{onSelect:function(t){e.setSelection({mapIndex:t,levelIndex:0,featureIndex:void 0,geometryIndex:void 0,ghostLevels:{}}),m(!1)}})))}var qe=n(121);function Ye(){var e=Object(o.useContext)(he);return r.a.createElement("div",{className:qe.home},r.a.createElement("button",{onClick:function(){return e.setZoom(1,[0,0])}},r.a.createElement(me.a,{icon:ye.g})))}var Je=n(123);function Re(){var e=Object(o.useContext)(he),t=e.maps[e.selection.mapIndex],n=[];return t.levels.forEach((function(e,t){n.push(Object(h.a)(Object(h.a)({},e),{},{features:e.features.filter((function(e){return e.properties.name}))}))})),r.a.createElement("div",{className:Je.print},r.a.createElement("div",{className:Je.page},r.a.createElement("h2",null,t.name),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object(Se.sanitize)(je()(t.description||""))}}),r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(Ee,{mode:"print",level:0}))),r.a.createElement("div",{className:Je.pages},n.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",{style:{height:"5in"}},r.a.createElement(Ee,{mode:"print",level:t})),r.a.createElement("h2",null,e.name),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object(Se.sanitize)(je()(e.description||""))}}),e.features.map((function(e,n){return r.a.createElement("div",{key:n},r.a.createElement("h3",null,"".concat(t+1,".").concat(n+1," ").concat(e.properties.name)),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object(Se.sanitize)(je()(e.properties.description||""))}}))})))}))))}var Qe={prefix:"fab",iconName:"statue",icon:[100,100,[],"none","M 50.000001,0.87620926 C 53.837858,11.917235 57.675715,22.958261 61.513572,33.999287 c 11.686603,0.238155 23.373206,0.47631 35.059809,0.714465 -9.314677,7.061883 -18.629353,14.123767 -27.94403,21.18565 3.38486,11.188214 6.76972,22.376428 10.15458,33.564642 C 69.189287,82.787502 59.594644,76.11096 50,69.434418 40.405356,76.110959 30.810711,82.787501 21.216067,89.464042 24.600928,78.275829 27.985788,67.087615 31.370649,55.899402 22.055973,48.837518 12.741296,41.775633 3.4266201,34.713749 15.113223,34.475595 26.799825,34.237441 38.486428,33.999287 42.324286,22.958261 46.162143,11.917235 50.000001,0.87620926 Z"]},Ze=n(125);function Ve(){return r.a.createElement("div",{className:Ze.welcomePage},r.a.createElement("h2",null,"Welcome to the RPG.ai Mapmaker"),r.a.createElement("h3",null,"Quick Start"),r.a.createElement("ul",null,r.a.createElement("li",null,"Use the scroll wheel or hold space to scroll around"),r.a.createElement("li",null,"Select the Wall tool (",r.a.createElement(me.a,{icon:ye.k}),") to build walls"),r.a.createElement("li",null,"Select the Rect tool (",r.a.createElement(me.a,{icon:ye.n}),") for rectangular areas"),r.a.createElement("li",null,"Place Decorations (",r.a.createElement(me.a,{icon:Qe}),") and Doors (",r.a.createElement(me.a,{icon:ye.d}),") "),r.a.createElement("li",null,"Select and Annotate your areas (checkout the Drawer ",r.a.createElement(me.a,{icon:ye.b})," on the right)"),r.a.createElement("li",null,'Click "Print" and print your map as a PDF')),r.a.createElement("h3",null,"Support"),r.a.createElement("ul",null,r.a.createElement("li",null,"File bugs at ",r.a.createElement("a",{href:"https://github.com/etherealmachine/mapmaker/issues"},"Github Issues")),r.a.createElement("li",null,"If you like the project, or want more features, support development on ",r.a.createElement("a",{href:"https://www.patreon.com/etherealmachine"},"Patreon"))),r.a.createElement("p",{className:Ze.footer},"Developed by ",r.a.createElement("a",{href:"https://github.com/etherealmachine"},"@etherealmachine"),", Copyright 2020"))}var $e=n(141),et=n(127);function tt(e){var t=Object(o.useRef)(null),n=Object(o.useRef)(null),a=Object(o.useRef)(null),i=Object(o.useState)(!1),s=Object(c.a)(i,2),l=s[0],p=s[1],d=function(){p(!0)},u=function(){p(!1)};return Object(o.useEffect)((function(){t.current&&a.current&&Object($e.a)(t.current,a.current,{placement:"right",modifiers:[{name:"offset",options:{offset:[0,20]}}]}),n.current&&(n.current.addEventListener("mouseenter",d),n.current.addEventListener("mouseleave",u))}),[t,a]),r.a.createElement("div",{ref:t},r.a.createElement("span",{ref:a,style:l?{}:{visibility:"hidden"},className:et.tooltip},e.tooltip),r.a.createElement("div",{ref:n},e.children))}var nt=n(129);function ot(e){return r.a.createElement("label",{className:nt.toggle},r.a.createElement("input",{type:"checkbox",checked:e.toggled,onChange:e.onToggle}),r.a.createElement("span",{className:nt.slider}))}var rt=n(67),at={pointer:{icon:ye.i,tooltip:"Select"},walls:{icon:ye.k,tooltip:"Walls"},stairs:{icon:{prefix:"fab",iconName:"stairs",icon:[100,100,[],"none","M 88.894187,13.349653 H 75.858354 67.310207 v 8.548146 13.036436 H 54.274372 45.726226 v 8.548149 13.035835 H 32.689789 24.141641 v 8.548147 13.035835 H 2.557659 v 8.548146 h 30.13213 V 78.1022 65.066366 H 54.274372 V 56.518219 43.482384 H 75.858354 V 34.934235 21.897799 h 13.035833 8.548154 v -8.548146 z"]},tooltip:"Stairs"},doors:{tooltip:"Doors",options:{normal:{icon:ye.d,tooltip:"Normal Door"},secret:{icon:ye.l,tooltip:"Secret Door"}}},decoration:{tooltip:"Decorations",options:{statue:{icon:Qe,tooltip:"Statue"},column:{icon:{prefix:"fab",iconName:"column",icon:[100,100,[],"none","M 99.307838,50.000002 C 99.676865,71.680786 83.863735,92.30908 62.849037,97.645153 43.43672,103.02916 21.169043,95.169716 9.7285742,78.512925 -1.6384271,62.63998 -2.3896164,39.964144 8.336037,23.568937 18.693791,7.0444626 39.349174,-2.2666802 58.573467,1.4133904 77.242915,4.6178118 93.377617,19.344785 97.783979,37.839728 c 1.009833,3.969178 1.527479,8.064294 1.523859,12.160274 z"]},tooltip:"Column"},stalacmite:{icon:{prefix:"fab",iconName:"stalacmite",icon:[100,100,[],"none","m 74.415659,92.321351 c -4.943641,0.08102 -9.841762,-1.089484 -14.790343,-0.658213 -3.565886,-0.471723 -7.22558,0.729371 -9.905688,3.089052 -1.962324,1.335386 -5.447033,1.324308 -6.094083,1.821715 -3.85956,0.399841 -7.750871,0.28678 -11.573283,0.679078 -2.618647,-0.623551 -6.036085,-0.489443 -8.075905,-1.732656 1.155957,-3.724279 4.94719,-5.230686 7.705191,-7.514488 2.969895,-1.745463 3.119779,-6.066341 3.390628,-9.173885 0.977271,-3.506623 0.968227,-6.763139 0.834314,-10.383359 0.215923,-3.830242 -0.1664,-7.549928 0.655209,-11.170453 0.846053,-3.59887 2.294525,-6.963584 3.511139,-10.460921 0.866289,-3.295106 0.609567,-7.081046 1.683639,-10.061072 1.42479,-3.266581 3.711094,-6.049776 5.124971,-9.287309 1.837583,-3.091687 3.916701,-6.009869 3.773832,-9.893974 0.571828,-4.55039 1.017447,-9.2261117 1.445585,-13.7209267 3.030585,-2.95287215 6.303553,0.1796971 8.022745,2.5391129 3.780486,-0.6640017 2.841131,5.3726878 4.064949,7.7612308 0.861812,3.528943 1.440482,7.099871 1.327164,10.73674 -0.02487,3.466809 0.535472,6.773821 1.338634,10.143058 1.921669,3.216066 -0.39964,6.716109 0.466581,10.116214 -0.08226,4.045679 1.089512,8.062286 2.357768,11.873417 3.207109,1.44481 4.605866,4.867853 4.700711,8.604547 -0.214383,4.020444 0.705194,8.095625 -0.21518,12.020218 -0.141146,3.376494 0.09043,6.94965 1.137373,9.996727 1.650808,1.264756 0.198735,3.557255 -0.885951,4.676147 z"]},tooltip:"Stalacmite"}}},brush:{icon:ye.a,tooltip:"Paint"},rect:{icon:ye.n,tooltip:"Rectangle"},polygon:{icon:ye.e,tooltip:"Polygon"},ellipse:{icon:rt.a,tooltip:"Circle/Ellipse"}};function it(){var e=Object(o.useContext)(he),t=function(t,n){return!!e.tools[t].hasOwnProperty("subtype")&&e.tools[t].subtype===n},n=function(t,n){return function(){e.setToolOption(t,n)}},a=function(t){var n=at[t];return(null===n||void 0===n?void 0:n.options)?n.options[e.tools[t].subtype].icon||ye.f:(null===n||void 0===n?void 0:n.icon)||ye.f};return r.a.createElement("div",{className:ge.toolbar,style:{position:"absolute",top:"50px",left:"24px"}},Object.entries(e.tools).map((function(o){var i,s,l=Object(c.a)(o,2),p=l[0],d=l[1];return r.a.createElement(tt,{key:p,tooltip:null===(i=at[p])||void 0===i?void 0:i.tooltip},r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:d.selected?ge.selected:"",disabled:d.disabled,onClick:(s=p,function(){e.setSelectedTool(s)})},r.a.createElement(me.a,{icon:a(p)})),d.selected&&at[p].options&&r.a.createElement("div",{className:ge.toolbar},Object.entries(at[p].options||{}).map((function(e){var o=Object(c.a)(e,2),a=o[0],i=o[1];return r.a.createElement(tt,{key:a,tooltip:i.tooltip},r.a.createElement("button",{className:t(p,a)?ge.selected:"",onClick:n(p,a)},r.a.createElement(me.a,{icon:i.icon||ye.f})))})))))})),r.a.createElement(ot,{toggled:2===e.gridSteps,onToggle:function(){e.setGridSteps(1===e.gridSteps?2:1)}}))}function st(e){return e&&"object"===typeof e&&!Array.isArray(e)}function lt(e){var t=void 0;if(e instanceof Array){t=[];e.forEach((function(e){t.push(e)}))}else if(e instanceof String)t=e;else if("object"==typeof e)for(var n in t={},e)t[n]=e[n];return t}function ct(e,t){var n=window.localStorage.getItem(e);null!==n&&function e(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];if(!o.length)return t;var a=o.shift();if(st(t)&&st(a))for(var i in a)st(a[i])?(t[i]||Object.assign(t,Object(Xe.a)({},i,{})),e(t[i],a[i])):(Object.isFrozen(t)&&(t=lt(t)),Object.assign(t,Object(Xe.a)({},i,a[i])));return e.apply(void 0,[t].concat(o))}(t,JSON.parse(n));var r=Object(o.useState)(t),a=Object(c.a)(r,2),i=a[0],s=a[1];return[i,function(t){window.localStorage.setItem(e,JSON.stringify(t)),s(t)}]}var pt=n(131);function dt(){var e=Object(o.useState)(0),t=Object(c.a)(e,2),n=t[0],a=t[1],i=ct("AppState",new ue),s=Object(c.a)(i,2),l=s[0],u=s[1];return l.setState=function(e){u(e),a(n+1)},window.app=l,document.title=l.maps[l.selection.mapIndex].name||"RPG.ai",r.a.createElement(p.a,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/print"},r.a.createElement("div",{className:pt.app},r.a.createElement(he.Provider,{value:l},r.a.createElement(Re,null)))),r.a.createElement(d.a,{path:"/"},r.a.createElement("div",{className:pt.app,style:{overflow:"hidden"}},r.a.createElement(he.Provider,{value:l},r.a.createElement(Ge,null),r.a.createElement("div",{className:pt.canvasWrapper},r.a.createElement(Ae,{open:l.showWelcome,toggle:l.toggleWelcome.bind(l)},r.a.createElement(Ve,null)),r.a.createElement(Ee,{mode:"edit"}),r.a.createElement(ze,null),r.a.createElement(it,null),r.a.createElement(Ke,null),r.a.createElement(Ye,null)))))))}s.a({dsn:"https://d42a7c4cafcb47f5b298dbf6e44b1834@o486991.ingest.sentry.io/5545134",integrations:[new l.a.BrowserTracing],tracesSampleRate:1}),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(dt,null)),document.getElementById("root"))}]),[[75,1,2]]]);
//# sourceMappingURL=main.bff26fb8.chunk.js.map